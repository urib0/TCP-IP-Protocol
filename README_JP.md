![](README.assets/pic1.jpg)

![](README.assets/pic2.jpg)

# 0.Changelog

- V1.0-2021/05/27: ドキュメントを作成する

- V1.1-2021/07/05: モーションコマンドの一部のパラメータエラーを修正しました。

- V1.2-2021/07/08: 主にロボットモードRobotModeの新規追加とドキュメント作成エラー

- V1.3-2021/07/13: リターンデータのテーブルを更新しました。

- V1.4-2021/07/16: Arc3はArc : MG400の新しいコマンドと一致するように変更されました。

- V1.5-2021/07/23: データ構造を削除し、バイト位置の値を追加しました。RobotModeの状態優先度を記述しました。

- V1.6-2021/08/04: Dashboardポートとリアルタイムフィードバックポートのテーブルの位置を調整しました。GKプロジェクトに従って、スクリプトの実行、セーブレジスタの読み書き、ロボットの状態を取得するコマンドを追加しました。

- V1.7-2021/08/23:Sync 命令追加、SetArmOrientation 記述最適化、e-skin SetObstacleAvoid, SetSafeSkin 関連命令、トラック・リカレンス関連命令 GetTraceStartPose, GetPathStartPose 追加。 StartTrace、StartPath、InverseSolutionとPositiveSolutionのインターフェイス、およびいくつかの書き込みエラー。

- V1.8-2021/08/31: 新しいインターフェース SetCollisionLevel, HandleTrajPoints, GetSixForceData, GetPose, GetAnglePose を追加しました。 GetAngle、EmergencyStop、StartFCTrace（フォースコントロール付き）、MoveJog。

- V1.8-2021/09/15: 軌道の前処理実行結果のインターフェースを定義しました。ユーザーがパラメータなしでこのコマンドを発行すると、現在のコマンド（軌道ファイルの前処理用）の結果に対する問い合わせを意味します。軌道の再帰/フィット/力制御によるフィッティングは、RobotModeを介してロボットの走行状態を取得します。

- V1.8-2021/09/27: Sync命令のポートを29999（ブロッキング命令）に変更、キューに入った命令が全て実行されるまで待ってからdoneに戻る、冗長な命令を削除しました。

- V1.8-2021/10/15: End 485のRTU機能をサポートするためにPXの必要性に応じてModbus TCPとRTU通信をサポートするコマンドを追加しました。詳細は「End 485のModbusRTU機能拡張」と「産業プロジェクトのModbus要件と概要設計計画」を参照ください。

- V1.9-2021/10/25: PXからのフィードバックに従い、正負解のパラメータ内容を最適化、エラーコードを取得するインターフェースを追加、リアルタイムフィードバックポートにユーザー座標、ツール座標、ハンドシステムを取得するパラメータを追加しました。

- V1.10-2021/10/27: PXの要求に基づき、4つのオプションパラメータ（（荷重＋偏心）、リアルタイムデータでの荷重パラメータのレポート、リアルタイムデータでのユーザー/ツール座標系のマトリックスのレポート、リアルタイムデータでの実際の関節モーメントのレポート、リアルタイムデータでの速度加速度のレポート、その他関連する比率の合計9つを追加することが可能になりました。

- V1.10-2021/11/03: PXブランチはポート30003を30003と30004に分割しました。ポート30003はランコマンドの送信に関連するインターフェースとしてのみ使用し、ポート30004はリアルタイムのフィードバックポートとしてのみ使用します。注：ポート30003の分割はコントローラバージョン3.5.2で実装予定、3.5.1は今のところまだ30003です。 ポートに接続し、リアルタイムにフィードバックしたり、モーション関連のコマンドを発行することができます。

- V2.0-2021/11/24: TCPIP機能の大幅な最適化；主な最適化：リターンフォーマットの定義、RobotModeリターン修正、ロボットデータ用の新しい30005と30006フィードバックポートなど；CRコントローラーサポートバージョン3.5.2以上。

- V2.0-2021/11/25：実行するRobotModeのリターンのあいまいさを最適化し、コントローラバージョン3.5.1との互換性を維持するために、キーロボットの状態の戻り値の前の351バージョンは変更を加えなかった：アイドル、ドラッグ、実行、アラーム状態、新しい保持ブレーキリリース、トラックの記録、一時停止、ポインティングなど、統一化のリアルタイムフィードバック記述、変更する提案によると。 ポート30005のフィードバック周期を200msに設定。

- V2.1-2021/11/30: 新しい DI、ToolDI、AI、ToolAI、DIGroup、DOGroup はデジタル入力信号、端のデジタル入力、アナログ入力、端のアナログ入力、グループのデジタル入力およびグループのデジタル出力命令を得ます; 力制御命令とのトラック再帰、トラックの適合は操作の最初のポイントへ戻ることを加えます パラメータ、現在の6次元力データの新しい生の値によるリアルタイムフィードバックデータ。

- V2.1 - 2021/12/14: LKプロジェクトは、リアルタイムフィードバックのためにボタンボードの5つのボタンのトリガー信号を追加しました。

- V2.1-2021/12/21: 機械タイプのリアルタイムフィードバックと、値が機械モデルを表すことを示すテーブルを追加。

- V2.2 - 2021/12/22: 実行コマンドのオプションパラメーターの一部エラーの修正と、モーションコマンドAccLとAccJのオプションパラメーターの統一。

- V2.3-2022/01/07: リアルタイムフィードバックのための新しい2次関数と現在のタイムスタンプ、新しいオン/オフブレーキコマンド、いくつかのコマンドの新しいインストラクション。

- V2.3-2022/01/12: モーションコマンドのユーザー座標系とツール座標系の新しいオプション設定、逆解法インターフェイスの再設計。

- V2.3-2022/01/21: リアルタイムフィードバック用にTCPセンサーフォース値（6次元フォースで計算）のフィールドを追加しました。

- V2.4-2022/01/24: RelMovJコマンドパラメーターの変更、相対運動コマンドスキームによる相対運動関連コマンドを5つ追加。

- V2.5-2022/02/08: 新たにStartDrag, StopDrag, SetCollideDrag, SetTerminalKeys, SetTerminal485, GetTerminal485命令を配布し、ドラッグモードへの移行、終了、ドラッグモードへの強制移行を設定し、ドラッグモードを終了する。 SetTerminalKeys機能有効状態、SetTerminal485パラメータ、GetTerminal485パラメータ。 GetErrorIDの記述、衝突検出とe-skin衝突のエラーコードリターンをコントローラとアルゴリズムのエラーコード配列に設定、エラーコード記述部の-2、-3の記述の削除。

- V2.6-2022/02/10: 正解・逆解命令の例を修正し、PayLoadで使用するためのLoadSwitch命令を追加しました。

- V2.7-2022/02/11: 力制御による軌跡フィッティングの記述を追加、StartFCTrace実行後にSyncを追加する必要があります。

- V2.8-2022/02/16: 使用頻度を制限するためにServoP/ServoJ命令を追加、SetCollideDragスイッチの状態を0 off, 1 onに変更、ドキュメント内の他の設定命令と調和するようにしました。





# 1.概要

CRロボットはリモートI/OモードとリモートModbusモード**の2種類のリモートコントロールをサポートしています。具体的なコントロール方法はDobot-CR-Series-Robot-APP-User-Guide-V3.7ドキュメント内の「ソフトウェア手順」->「設定」->「リモートコントロール」章に記載されています。

上記2つの方法は、主に**実行中のスクリプトのリモートコントロールを目的としています。TCP/IPベースの通信は、低コスト、高信頼性、実用性、高性能を特徴としており、多くの産業オートメーションプロジェクトでは、ロボットを制御するためのTCP/IPプロトコルのサポートを広く求めているため、CR/MG400/M1ProロボットはTCP/IPプロトコルに基づいて設計し、外部デバイスと対話するための豊富なインターフェースを提供する予定です。

TCP/IPプロトコルのサポートに関しては、CRシリーズロボットはV3.5.1.9以上、MG400/M1ProロボットはV1.5.4.0以上のコントローラバージョンが必要です。

# 2.メッセージの形式

(a) 設計上、CRロボットは29999、30003、30004、30005、30006のサーバーポートを開放します。

29999サーバーポート（以下Dashboardポート）は、一部の設定やモーションコントロール関連のコマンドを送受信する、つまり**Dashboardポートがクライアントから合意したメッセージフォーマットを受け取り、その結果をクライアントにフィードバックする**役割を担っています。

30003サーバーポートは、クライアントから合意されたメッセージフォーマットを受信するだけで、フィードバックは行いません**。(注：30003ポートを30003と30004ポートに分割することは、コントローラバージョン3.5.2で実装する予定です。3.5.1は当分の間、リアルタイムフィードバックと動作関連コマンドの発行用に30003ポートを残しています;)

30004サーバーポート（以下、リアルタイムフィードバックポート）**は8ms毎にロボットに関する情報をフィードバック、**30005サーバーポート**は200ms**毎にロボットに関する情報をフィードバック、30006ポートは**設定可能**でロボットに関する情報をフィードバック（デフォルトは**50ms**毎のフィードバック）することができます。

注：TCPIPリモートコントロールコマンドは、大文字と小文字を区別しません。例えば、ENABLEROBOT()コマンドやenablerobot()コマンド、eNabLErobOt()コマンドは、コントローラが有効なコマンドに従います。

## 2.1 送信フォーマット

メッセージ名 (Param1,Param2,Param3....Paramn)`。
メッセージの形式は上記のとおりで、メッセージ名とパラメータを括弧で囲み、各パラメータをカンマ「,」で区切り、右括弧で終端した完全なメッセージで構成されます。

メッセージコマンド、メッセージリプライともにASCII形式（文字列形式）です。

## 2.2 リターンフォーマット

### 2.2.1戻る

`"ErrorID,{値,... ,valuen}, メッセージ名 (Param1,Param2,Param3 ....Paramn);"`.

ErrorIDが0であれば、コマンドの受信に成功したことを意味し、0以外を返せば、コマンドにエラーがあったことを意味する。 メッセージ名（Param1,Param2,Param3......Paramn）は、次の内容を意味する。

例

MovL(-500,100,200,150,0,90)
Return: 0,{},MovL(-500,100,200,150,0,90); /0は受信に成功したことを意味します No return value return {}; /0は受信に成功したことを意味します No return value return {}; /0は受信に成功したことを意味します。


Mov(-500,100,200,150,0,90)
Alarm: -10000,{},Mov(-500,100,200,150,0,90); //10000はコマンドエラー 戻り値なし {}.



# 3.通信プロトコル - ダッシュボードポート

ホストコンピュータは，ポート 29999 を介していくつかの設定関連コマンドを直接ロボットに送ることができる。これらのコマンドは CR 自身が定義しており，これらの機能を Dashboard と呼ぶ。 Dashboardのコマンドを使用して、ロボットの有効/無効、リセットなどの制御が可能です。

ロボットのセットアップに関するコマンドは以下の通りです。

| 指令              | 描述                                                         |
| ----------------- | ------------------------------------------------------------ |
| EnableRobot       | ロボットを可能にする                                           |
| DisableRobot      | ロボットを無効にする                                           |
| ClearError        | エラー解除のためのリセット                                      |
| ResetRobot        | ロボットは現在の動作を停止し再度イネーブルを受信して停止を計画する     |
| SpeedFactor       | グローバルレート比率を設定する                                  |
| User              | 校正済みユーザー座標系の選択(デカルト空間表示値 ポイントに基づく実際の有効性)|
| Tool              | 較正済み工具座標系を選択する                                       |
| RobotMode         | ロボットモード                                                   |
| PayLoad           | 負荷の設定                                                     |
| DO                | デジタル出力ポートの状態設定                                       |
| DOExecute         | デジタル出力ポートの状態設定（即時コマンド）                           |
| ToolDO            | エンドデジタル出力ポートの状態設定                                   |
| ToolDOExecute     | エンドデジタル出力ポート状態設定（即時コマンド）                       |
| AO                | アナログ出力ポートの状態設定                                       |
| AOExecute         | アナログ出力ポートの状態設定（即時コマンド）                           |
| AccJ              | 関節の加速度比を設定します。 このコマンドは、MovJ、MovJIO、MovJR、JointMovJコマンドのみ有効です。 |
| AccL              | 直交加速度スケールを設定します。 MovL、MovLIO、MovLR、Jump、Arc、Circle 命令にのみ有効です。 |
| SpeedJ            | 関節速度比を設定します。 このコマンドは、MovJ、MovJIO、MovJR、JointMovJコマンドのみ有効です。 |
| SpeedL            | 直交速度スケールを設定します。 MovL、MovLIO、MovLR、Jump、Arc、Circle 命令にのみ有効です。 |
| Arch              | ジャンプゲートパラメーターインデックス（リフト開始高さ、リフト最大高さ、ドロップ終了高さ）を設定する。 |
| CP                | 動作中のスムーズな移行を設定                                           |
| LimZ              | ジャンプモードの最大リフト高を設定する                                     |
| SetArmOrientation | ハンドシステムのセットアップ                                                     |
| PowerOn           | ロボットのパワーアップ                                                   |
| RunScript         | スクリプトの実行                                                     |
| StopScript        | 停止スクリプト                                                     |
| PauseScript       | ポーズスクリプト                                                     |
| ContinueScript    | スクリプトを続ける                                                     |
| SetSafeSkin       | セイフティースキンの状態を設定する                                         |
| SetObstacleAvoid  | 安全肌障害物回避モードスイッチの状態を設定する。                                 |
| GetTraceStartPose | 軌道フィットの最初の点位置を取得する                                       |
| GetPathStartPose  | 軌道フィットの最初の点位置を取得する                                       |
| PositiveSolution  | 正解                                                         |
| InverseSolution   | 逆解                                                         |
| SetCollisionLevel | コリジョンレベルの設定                                                 |
| HandleTrajPoints  | トラックファイルのプリプロセッシング                                               |
| GetSixForceData   | 6次元力データへのアクセス                                               |
| GetAngle          | ロボットアームの関節座標系における実時間位置の取得                             |
| GetPose           | 直交座標系におけるロボットアームの実時間姿勢の取得                           |
| EmergencyStop     | 急停                                                         |
| Sync              | ブロッカはキューイングされた命令を実行し、すべてのキューイングされた命令が実行されるまで戻りません。             |
| ModbusCreate      | Modbusマスターを作成し、スレーブとの接続を確立します。                             |
| ModbusClose       | Modbusスレーブとの接続を解除する                                         |
| GetInBits         | リードディスクリート入力機能                                               |
| GetInRegs         | 入力レジスタの読み出し                                                 |
| GetCoils          | コイル読み取り機能                                                   |
| SetCoils          | ライトコイル機能                                                   |
| GetHoldRegs       | セーブレジスタの読み出し                                                 |
| SetHoldRegs       | ライトセーブレジスタ                                                 |
| GetErrorID        | エラーIDの取得                                                   |
| DI                | デジタル入力ポートの状態取得                                       |
| ToolDI            | エンドデジタル入力ポートの状態を取得する                                   |
| AI                | アナログ入力ポートの電圧値を取得する                                     |
| ToolAI            | エンドツーエンドのアナログ入力ポートの電圧値の取得                                 |
| DIGroup           | 入力グループポートの状態取得                                           |
| DOGroup           | デジタル出力グループポートの状態設定                                       |
| BrakeControl      | 保持ブレーキ制御                                                     |
| StartDrag         | ドラッグ＆ドロップのページへ                                                     |
| StopDrag          | ドラッグ＆ドロップを終了する                                                     |
| SetCollideDrag    | 強行突破レッカー                                                 |
| SetTerminalKeys   | 終了ボタン機能有効状態の設定                                     |
| SetTerminal485    | エンドのパラメータを設定する 485                                            |
| GetTerminal485    | エンドのパラメータを取得する 485                                            |
| LoadSwitch        | 制御負荷の設定状態                                             |



## 3.1 EnableRobot

- 機能：ロボットを使用可能にする

- 形式：EnableRobot()

- 対応ポート：29999

- オプションのパラメータについて詳しく説明する。

  | パラメータ名|タイプ|意味|
  | ------- | ------ | -------------- |
  | load    | double | 负载重量kg，取值范围：0~机器额定负载；        |
  | centerX | double | X方向偏心距离mm，取值范围：-500mm~500mm； |
  | centerY | double | Y方向偏心距离mm，取值范围：-500mm~500mm； |
  | centerZ | double | Z方向偏心距离mm，取值范围：-500mm~500mm； |



- リターンです。

  ErrorID,{},EnableRobot()。

- 例

  EnableRobot()

- 説明： **オプションパラメータ数：0/1/4** (パラメータ無し、正常受信ErrorIDは0を返す。ネガティブウェイトパラメータのデフォルトを記入、ErrorIDは0を返す。ネガティブウェイト、X方向偏心距離、Y方向偏心距離、Z方向偏心距離の4パラメータ記入、ErrorIDは0を返す。失敗するとエラーコードを返す。6章参照。)

  



## 3.2 DisableRobot

- 機能：ロボットを停止させる

- 形式：DisableRobot()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},DisableRobot()。

- 例

  DisableRobot()



## 3.3 ClearError

- 機能：エラーロボットのクリア

- 形式：ClearError()

- パラメータ数：0

- 対応ポート：29999



- リターンです。

  ErrorID,{},ClearError()です。

- 例

  ClearError()

- 説明：アラームをクリアした後、RobotMode によりロボットがまだアラーム状態にあるかどうかを判断できる。クリアできないアラームについては、解決のために制御盤を再起動する必要がある（詳細は GetErrorID の説明を参照のこと）。

## 3.4 ResetRobot

- 機能：ロボットを停止させる

- 形式：ResetRobot()

- パラメータ数：0

- 対応ポート：29999



- リターンです。

  ErrorID,{},ResetRobot()。

- 例

  リセットロボット(ResetRobot)

## 3.5 SpeedFactor

- 動作 :グローバルスピードの比率を設定します。

- 形式：SpeedFactor(ratio)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                |
  | ----- | ---- | ----------------- |
  | ratio | int  | 运动速度比例，取值范围：1~100 |

- リターンです。

  ErrorID,{},SpeedFactor(ratio)。

- 例

  スピードファクター(80)


## 3.6 User

- 機能：キャリブレーションされたユーザー座標系を選択します。

- 形式：ユーザー(インデックス)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                   |
  | ----- | ---- | -------------------- |
  | index | int  | 选择已标定的用户坐标系，取值范围：0~9 |

- リターンです。

  ErrorID,{},User(index)です。

  ErrorID が -1 を返す場合、設定されたユーザ座標のインデックスが存在しない。

- 例

  ユーザー(1)

## 3.7 Tool

- 機能：較正済みツールの座標系を選択します。

- 形式：ツール(インデックス)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                   |
  | ----- | ---- | -------------------- |
  | index | int  | 选择已标定的工具坐标系，取值范围：0~9 |

- リターンです。

  ErrorID,{},Tool(index)です。

  ErrorID が -1 を返した場合、設定された工具座標のインデックスが存在しない。

- 例

  ツール(1)

## 3.8 RobotMode

- 機能：ロボットの状態。

- 形式：RobotMode()

- パラメータ数：0

- 対応ポート：29999

- 戻り値。                            

  | 模式   | 描述                    | 备注         |
  | ---- | --------------------- | ---------- |
  | 1    | ROBOT_MODE_INIT       | 初始化        |
  | 2    | ROBOT_MODE_BRAKE_OPEN | 抱闸松开       |
  | 3    |                       | 保留位        |
  | 4    | ROBOT_MODE_DISABLED   | 未使能(抱闸未松开) |
  | 5    | ROBOT_MODE_ENABLE     | 使能(空闲)     |
  | 6    | ROBOT_MODE_BACKDRIVE  | 拖拽         |
  | 7    | ROBOT_MODE_RUNNING    | 运行状态       |
  | 8    | ROBOT_MODE_RECORDING  | 拖拽录制       |
  | 9    | ROBOT_MODE_ERROR      | 报警         |
  | 10   | ROBOT_MODE_PAUSE      | 暂停状态       |
  | 11   | ROBOT_MODE_JOG        | 点动         |


- リターンです。

  ErrorID,{Value},RobotMode(); //Valueはリターンモードの値です。

- 例

  ロボットモード(RobotMode)

- 注：コントローラバージョン3.5.1との互換性を維持するため、以前のキーロボット状態の戻り値は変更されていません；例：アイドル、ドラッグ、ラン、アラーム状態；新しいホールドブレーキ解除、トラック記録、一時停止、ポインティングなど。

- 実行状態には、トラックの複製/装着中、ロボットの実行状態、スクリプトの実行状態が含まれます。

## 3.9 PayLoad

- 機能：現在の負荷を設定する

- 形式：PayLoad(weight,inertia)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名     | 类型     | 含义                     |
  | ------- | ------ | ---------------------- |
  | weight  | double | 负载重量 kg，取值范围：0~机器额定负载； |
  | inertia | double | 负载惯量 kgm²              |

- リターンです。

  ErrorID,{},PayLoad(weight,inertia)です。  

- 例

  PayLoad(3,0.4)
  
  注：LuaのLoadSetと互換性を持たせるため、tcp命令でLoadSetをサポートし、LoadSwitch命令で使用するほか、LoadSetを使用するとPayLoadを呼ぶのと同じになります。

## 3.10 DO

- 動作：デジタル出力ポートの状態を設定（キュー命令） 

- フォーマット：DO(index,status)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名    | 类型   | 含义                        |
  | ------ | ---- | ------------------------- |
  | index  | int  | 数字输出索引，取值范围：1~16或100~1000 |
  | status | int  | 数字输出端口状态，1：高电平；0：低电平      |

- リターンです。

  ErrorID,{},DO(index,status);   

- 例

  DO(1,1)

- 注：値域100-1000の使用には、拡張IOモジュールのハードウェアサポートが必要です。

## 3.11 DOExecute

- 動作： デジタル出力ポートの状態を設定（即値コマンド）

- 書式：DOExecute(index,status)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名    | 类型   | 含义                        |
  | ------ | ---- | ------------------------- |
  | index  | int  | 数字输出索引，取值范围：1~16或100~1000 |
  | status | int  | 数字输出端口状态，1：高电平；0：低电平      |

- リターンです。

  ErrorID,{},DOExecute(index,status)。  

- 例

  DOExecute(1,1)

- 注：値域100-1000を使用するには、Expanded IOモジュールのハードウェアサポートが必要です。

## 3.12 ToolDO

- 動作：エンドデジタル出力ポートの状態を設定します（キューコマンド）。

- 形式：ToolDO(index,status)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名    | 类型   | 含义                   |
  | ------ | ---- | -------------------- |
  | index  | int  | 数字输出索引，取值范围：1/2      |
  | status | int  | 数字输出端口状态，1：高电平；0：低电平 |

- リターンです。

  ErrorID,{},ToolDO(index,status)。 

- 例

  ツールDO(1,1)

## 3.13 ToolDOExecute

- 動作：エンドデジタル出力ポート状態の設定（即値コマンド）

- 書式：ToolDOExecute(index,status)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名    | 类型   | 含义                   |
  | ------ | ---- | -------------------- |
  | index  | int  | 数字输出索引，取值范围：1/2      |
  | status | int  | 数字输出端口状态，1：高电平；0：低电平 |

- リターンです。

  ErrorID,{},ToolDOExecute(index,status)です。 

- 例

  ToolDOExecute(1,1)

## 3.14 AO

- 機能：制御盤のアナログ出力ポートの電圧値を設定します（キューコマンド）。

- 形式：AO(インデックス,値)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名   | 类型     | 含义                    |
  | ----- | ------ | --------------------- |
  | index | int    | 模拟输出索引，取值范围：1/2       |
  | value | double | 对应index的电压值，取值范围0~10V |

- リターンです。

  ErrorID,{},AO(index,value)です。 

- 例

  AO(1,2)

- 説明：Currentは当面の間、サポートされません。

## 3.15 AOExecute

- 動作：制御盤のアナログ出力ポートの電圧値を設定（即値コマンド）

- 書式：AOExecute(index,value)

- パラメータ数：2

- 対応ポート：29999



- パラメータ詳細：2

  | 参数名   | 类型     | 含义                    |
  | ----- | ------ | --------------------- |
  | index | int    | 模拟输出索引，取值范围：1/2       |
  | value | double | 对应index的电压值，取值范围0~10V |

- リターンです。

  ErrorID,{},AOExecute(index,value)です。

- 例

  AOExecute(1,2)

- 説明：現在、カレントはサポートされていません。


## 3.16 AccJ

- 機能：関節の加速度比を設定します。 このコマンドは、MovJ、MovJIO、MovJR、JointMovJ コマンドのみ有効です。

- フォーマット：AccJ(R)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名  | 类型   | 含义                  |
  | ---- | ---- | ------------------- |
  | R    | int  | 关节加速度百分比，取值范围：1~100 |

- リターンです。

  ErrorID,{},AccJ(R)です。

- 例

  AccJ(50)

## 3.17 AccL

- 機能：直交加速度スケールを設定します。 MovL、MovLIO、MovLR、Jump、Arc、Circle 命令にのみ有効です。

- フォーマット：AccL(R)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名  | 类型   | 含义                  |
  | ---- | ---- | ------------------- |
  | R    | int  | 笛卡尔加速度比例，取值范围：1~100 |

- リターンです。

  ErrorID,{},AccL(R)です。

- 例

  アクセル(50)

## 3.18 SpeedJ

- 動作 :関節速度比を設定します。 このコマンドは、MovJ、MovJIO、MovJR、JointMovJコマンドのみ有効です。

- フォーマット：SpeedJ(R)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名  | 类型   | 含义                |
  | ---- | ---- | ----------------- |
  | R    | int  | 关节速度比例，取值范围：1~100 |

- リターンです。

  ErrorID,{},SpeedJ(R)です。

- 例

  スピードJ(50)

## 3.19 SpeedL

- 機能：直交速度比を設定します。 MovL、MovLIO、MovLR、Jump、Arc、Circle 命令にのみ有効です。

- フォーマット：SpeedL(R)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名  | 类型   | 含义                 |
  | ---- | ---- | ------------------ |
  | R    | int  | 笛卡尔速度比例，取值范围：1~100 |

- リターンです。

  ErrorID,{},SpeedL(R)です。

- 例

  スピードL(50)

## 3.20 Arch

- 動作 :ジャンプゲートパラメータ（開始点リフト高さ、最大リフト高さ、終了点ドロップ高さ）の インデックスを設定します。

- フォーマット：Arch(Index)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名   | 类型   | 含义              |
  | ----- | ---- | --------------- |
  | Index | int  | 门型参数索引，取值范围：0~9 |

- リターンです。

  ErrorID,{},Arch(Index)です。

- 例

  アーチ(1)

## 3.21 CP

- 機能：アームを始点から終点まで通過させるとき、直角に移行させるか、中間点を過ぎてカーブさせるか、CP比率、すなわちスムーズな移行を設定します。 Jumpコマンドは無効です。

- フォーマット：CP(R)

- パラメータ数：1

- 対応ポート：29999



- パラメータ詳細： 1

  | 参数名  | 类型   | 含义                |
  | ---- | ---- | ----------------- |
  | R    | int  | 平滑过渡比例，取值范围：1~100 |

- リターンです。

  ErrorID,{},CP(R)です。

- 例

  CP(50)

## 3.22 LimZ

- 機能：Jump モードの最大リフト高を設定します。
- 形式：LimZ(zValue)
- パラメータ数：1
- 対応ポート：29999


- 参数详解：1

  | パラメータ名｜タイプ｜意味｜｜｜。
  | ------ | ---- | -------------------- |
  | zValue | int | 最大抬升高度，不能超过机械臂Z轴极限位置 |

- 返回：

  ErrorID,{},LimZ(zValue);

- 示例：

  LimZ(80)

- 说明：**此条指令已经废弃，不建议使用；**

## 3.23 SetArmOrientation

- 功能：设置手系指令。
- 格式：SetArmOrientation(LorR,UorD,ForN,Config6)
- 参数数量：4
- 支持端口：29999


- 参数详解：4

  | 参数名 | 类型 | 含义 |
  | ------- | ---- | ---------------------------------------- |
  | LorR | int | 臂方向向前/向后(1/-1)<br /> 1：向前<br />-1：向后 |
  | UorD | int | 臂方向肘上/肘下(1/-1)<br /> 1：肘上<br />-1：肘下 |
  | ForN | int | 臂方向腕部是否翻转(1/-1)<br /> 1：腕不翻转<br />-1：腕翻转 |
  | Config6 | int | 第六轴角度标识<br /> -1,-2... ：第6轴角度为[0,-90]为-1；[-90,-180]为-2；以此类推<br />1,2... ：第6轴角度为[0,90]为1；[90,180]为2；以此类推 |

- 返回：

  ErrorID,{},LimZ(zValue);

- 示例：

  SetArmOrientation(1,1,-1,1)

## 3.24 PowerOn

- 功能：机器人上电。

- 格式：PowerOn()

- 参数数量：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},PowerOn()。

- 例

  パワーオン()

- 説明：ロボットは電源投入から完了まで、約10秒間の待機が必要です； **。


## 3.25 RunScript

- 機能：スクリプトを実行します。

- 書式：RunScript(projectName)

- パラメータ数：1

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | ----------- | ------ | ---- |
  | projectName | 文字列 | scriptName |


- リターンです。

  ErrorID,{},RunScript(projectName)。

- 例

  ランスクリプト(demo)

## 3.26 StopScript

- 機能：スクリプトを停止させる。

- 書式：StopScript()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},StopScript()。



- 例

  ストップスクリプト()

## 3.27 PauseScript

- 機能：スクリプトを一時停止します。

- 書式：PauseScript()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},PauseScript()。



- 例

  ポーズスクリプト(PauseScript)

## 3.28 ContinueScript

- 功能：继续脚本。

- 格式：ContinueScript()

- 参数数量：0

- 支持端口：29999

- 返回：

  ErrorID,{},ContinueScript();



- 示例：

  ContinueScript()


## 3.29 SetSafeSkin

- 機能：セーフスキンスイッチの状態を設定します。

- 形式：SetSafeSkin(status)

- パラメータ数：1

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | ------ | ---- | --------------------------------- |
  | status | int | status：电子皮肤开关状态，0：关闭电子皮肤；1：开启电子皮肤 |


- 返回：

  ErrorID,{},SetSafeSkin(status));

- 示例：开启电子皮肤功能

  SetSafeSkin (1)

## 3.30 SetObstacleAvoid (障害物回避)

- 機能：SafeSkin障害物回避モードスイッチの状態を設定します。

- 形式：SetObstacleAvoid(status)

- パラメータ数：1

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | ------ | ---- | ---------------------------------------- |
  | status | int | status：安全皮肤避障模式开关状态，0：关闭安全皮肤避障模式；1：开启安全皮肤避障功能 |


- 返回：

  ErrorID,{},SetObstacleAvoid(status);

- 示例：开启安全皮肤避障功能

  SetObstacleAvoid(1)

- 説明: **この命令は一時的に非推奨です。

## 3.31 GetTraceStartPose

- Function: トレースフィットにおける最初の点の位置を取得する。

- 書式：GetTraceStartPose(traceName)

- パラメータ数：1

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |


- 返回：

  ErrorID,{x,y,z,a,b,c},GetTraceStartPose(traceName); //{x,y,z,a,b,c}指点位坐标值  

- 示例：

  GetTraceStartPose(recv_string)

- 说明：**本条指令在控制器3.5.2版本以及以上支持；**

## 3.32 GetPathStartPose

- 功能：获取轨迹复现中首个点位。

- 格式：GetPathStartPose(traceName)

- 参数数量：1

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |


- 返回：

  ErrorID,{j1,j2,j3,j4,j5,j6},GetTraceStartPose(traceName); //{j1,j2,j3,j4,j5,j6}关节点位坐标值

- 示例：

  GetPathStartPose(recv_string)

- 说明：**本条指令在控制器3.5.2版本以及以上支持；**

## 3.33 PositiveSolution

- 功能：正解。 （给定机器人各关节的角度，计算出机器人末端的空间位置）

- 格式：PositiveSolution(J1,J2,J3,J4,J5,J6,User,Tool)

- 参数数量：8

- 支持端口：29999

- パラメータ詳細：8

  | 参数名 | 类型 | 含义 |
  | ---- | ------ | ----------- |
  | J1 | double | J1 轴位置，单位：度 |
  | J2 | double | J2 轴位置，单位：度 |
  | J3 | double | J3 轴位置，单位：度 |
  | J4 | double | J4 轴位置，单位：度 |
  | J5 | double | J5 轴位置，单位：度 |
  | J6｜double｜J6軸の位置（°）｜。
  | ユーザー座標系｜int｜キャリブレーションされたユーザー座標系を選択します。
  | ツール｜int｜較正されたツール座標系を選択します｜。

- リターンです。

  ErrorID,{x,y,z,a,b,c},PositiveSolution(J1,J2,J3,J4,J5,J6,User,Tool); //{x,y,z,a,b,c} は、返された空間位置のことです。 

- 例：下方向の関節角度は、ロボットの端の現在の空間位置を返す

  PositiveSolution(0,0,-90,0,90,0,1,1)

  リターンです。

  0,{473.000000,-141.000000,469.000000,-180.000000,-0.000000,-90.000000},PositiveSolution(0,0,-90,0,90,0,0,0);

- 説明、周知が必要です。

  - ロボットの腕の向き SetArmOrientation

  

## 3.34 InverseSolution

- 機能：逆解法 (ロボット先端の位置と姿勢が分かっているので、ロボットの関節の角度値を計算する）。

- フォーマット：InverseSolution(X,Y,Z,Rx,Ry,Rz,User,Tool,isJointNear,JointNear)

  // isJointNear と JointNear はオプションの設定パラメータです。

- パラメータ数：10個

- 対応ポート：29999

- 必須パラメータ：8個

  | 参数名 | 含义 | 类型 |
  | ---- | ----------- | ------ |
  | X | X 轴位置，单位：毫米 | double |
  | Y | Y 轴位置，单位：毫米 | double |
  | Z | Z 轴位置，单位：毫米 | double |
  | Rx | Rx 轴位置，单位：度 | double |
  | Ry | Ry轴位置，单位：度 | double |
  | Rz | Rz轴位置，单位：度 | double |
  | User | 选择已标定的用户坐标系 | int |
  | Tool | 选择已标定的工具坐标系 | int |


- 可选参数详解：2

  | 参数名 | 含义 | 类型 |
  | ----------- | ---------------------------------------- | ------ |
  | isJointNear | 是否角度选解（值为1:JointNear数据有效，<br />值为0:JointNear数据无效，算法根据当前角度进行选解；<br />不填默认值为0） | int |
  | JointNear | 选解六个关节角度值 | string |

- 返回：

  ErrorID,{J1,J2,J3,J4,J5,J6},InverseSolution(X,Y,Z,Rx,Ry,Rz,User,Tool,isJointNear,JointNear); //{J1,J2,J3,J4,J5,J6}指返回的关节值; isJointNear,JointNear若有下发则返回，没有下发则不返回；

- 示例：

  下发不带选解关节角度的笛卡尔坐标值返回机器人关节角度值：

  InverseSolution(473.000000,-141.000000,469.000000,-180.000000,0.000,-90.000,0,0)

  返回：0,{0,0,-90,0,90,0},InverseSolution(473.000000,-141.000000,469.000000,

  -180.000000,0.000,-90.000,0,0);

  下发带选解关节角度的笛卡尔坐标值返回机器人关节角度值：

  InverseSolution(473.000000,-141.000000,469.000000,-180.000000,0.000,-90.000,0,0,1,{0,0,-90,0,90,0})
  
  返回：0,{0,0,-90,0,90,0},InverseSolution(0,-247,1050,-90,0,180,0,0,1,{0,0,-90,0,90,0});


## 3.35 SetCollisionLevel

- 功能：设置碰撞等级。

- 格式：SetCollisionLevel(level)

- 参数数量：1

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | ----- | ---- | ---------------------------------------- |
  | level | int | level: 碰撞等级<br /> 0：关闭碰撞检测<br /> 1~5：等级越高越灵敏 |


- 返回：

  ErrorID,{},SetCollisionLevel(level);   

- 示例：

  SetCollisionLevel(1)

## 3.36 HandleTrajPoints

- 功能：轨迹文件的预处理。

- 格式：HandleTrajPoints(traceName)

- 参数数量：1

- 支持端口：29999

- 参数详解：1

  | 参数名 | 类型 | 含义 |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |

- 返回：

  ErrorID,{},HandleTrajPoints(traceName);   

- 说明：由于轨迹预处理计算结果会根据文件的大小不同算法处理时间会有差异，**若用户下发不带参数的该指令，代表查询当前指令的结果**；返回：返回为-3表示文件内容错误，返回为-2表示文件不存在，返回为-1表示预处理没有完成；返回为0表示预处理完成，没有错误；返回大于0的结果表示当前返回结果对应的点位有问题；

- 示例：下发轨迹名为recv_string做预处理，然后在一定周期查询预处理结果；

  HandleTrajPoints(recv_string)

  HandleTrajPoints()

- 说明：**本条指令在控制器3.5.2版本以及以上支持；**

## 3.37 GetSixForceData

- 功能：获取六维力数据

- 格式：GetSixForceData()

- 参数数量：0

- 支持端口：29999

- 返回：

   ErrorID,{Fx,Fy,Fz,Mx,My,Mz},GetSixForceData(); //{Fx,Fy,Fz,Mx,My,Mz}表示当前六维力数据原始值；

- 示例：

   GetSixForceData()

  返回：0,{0.0,0.0,0.0,0.0,0.0,0.0},GetSixForceData();

## 3.38 GetAngle

- 功能：获取关节坐标系下机械臂的实时位姿

- 格式：GetAngle()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

   ErrorID,{J1,J2,J3,J4,J5,J6},GetAngle(); //{J1,J2,J3,J4,J5,J6} は現在位置の関節座標値です。

- 例

   GetAngle()

   Returns: 0,{0.0,0.0,90.0,0.0,-90.0,0.0},GetAngle(); 

## 3.39 GetPose

- 機能：アームのリアルタイムポーズを直交座標系で取得する（ユーザ座標系、ツール座標系が設定されている場合、取得されるポーズはカレント座標系でのポーズとなる）。

- 書式：GetPose()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{X,Y,Z,Rx,Ry,Rz},GetPose(); //{X,Y,Z,Rx,Ry,Rz} は、現在位置の直交座標値を示す。

- 例

  GetPose()

  Returns: 0,{-473.0,-141.0,469.0,-180.0,0.0,90.0},GetPose();

## 3.40 EmergencyStop

- 機能：緊急停止

- 形式：EmergencyStop()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

   ErrorID,{},EmergencyStop()です。  

- 例

   エマージェンシーストップ(EmergencyStop)


## 3.41 ModbusCreate

- 機能：Modbusマスタを作成します。

- フォーマット：ModbusCreate(ip,port,slave_id,isRTU)です。

- パラメータ数：4個

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | -------- | ------ | ---------------------------------------- |
  | ip | string | 从站ip地址； |
  | port | int | 从站端口; |
  | slave_id | int | 从站ID（取值范围大于0的整数） |
  | isRTU | int | **可选参数**，取值范围0/1：<br /> 如果为空或者值为0，建立modbusTCP通信；<br /> 如果为1，建立modbusRTU通信；<br /> |


- 返回：

  ErrorID,{index},ModbusCreate(ip,port,slave_id,isRTU); //ErrorID:0表示创建Modbus主站成功，-1表示创建Modbus主站失败，其他值参考错误码描述；index: 返回的主站索引，最多支持5个设备, 取值范围(0~4)；

- 示例：建立RTU通信主站(60000末端透传端口)

  ModbusCreate(127.0.0.1,60000,1,true)

- 说明：**控制器3.5.2版本以及以上版本支持；**

## 3.42 ModbusClose

- 功能：和Modbus从站断开连接,释放主站。

- 格式：ModbusClose(index)

- 参数数量：1

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | ----- | ------ | -------- |
  | index | string | 返回的主站索引； |


- 返回：

  ErrorID,{},ModbusClose(index);     

- 示例：

  ModbusClose(0)

- 说明：**控制器3.5.2版本以及以上版本支持；**

  

## 3.43 GetInBits

- 功能：读离散输入功能。

- 格式：GetInBits(index,addr,count)

- 参数数量：3

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | ----- | ---- | ----------- |
  | index | int | 返回的主站索引； |
  | addr | int | 视从站配置而定； |
  | count | int | 个数，取值范围1~16 |


- 返回：

  ErrorID,{value1,value2,... ,valuen},GetInBits(index,addr,count); //table，按位获取结果{value1,value2... ,valuen}

- 示例：

   下发： GetInBits(0,3000,5)

  正常返回：0,{1,0,1,1,0},GetInBits(0,3000,5);

  错误返回：-1,{},GetInBits(0,3000,5);

- 说明：**控制器3.5.2版本以及以上版本支持；**

## 3.44 GetInRegs

- 功能：读输入寄存器。

- 格式：GetInRegs(index,addr,count,valType)

- 参数数量：4

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | ------- | ------ | ---------------------------------------- |
  | index | int | 返回的主站索引； |
  | addr | int | 视从站配置而定； |
  | count | int | 个数，取值范围：1 -4 |
  | valType | string | 可选参数，<br />U16: 读取16位无符号数（2个字节，占用1个寄存器）<br />U32: 读取32位无符号数（4个字节，占用2个寄存器）<br />F32: 读取32位浮点数（4个字节，占用2个寄存器）<br />F64: 读取64位 浮点数（8个字节，占用4个寄存器） |


- 返回：

  ErrorID,{value1,value2,... ,valuen},GetInRegs(index,addr,count,valType); //ErrorID为0表示正常，为-1表示没有获取成功;table，按变量类型返回{value1,value2... ,valuen}

- 例

  GetInRegs(0,4000,3)

  正常復帰：0,{5,18,12},GetInRegs(0,4000,3)となりました。

  エラーは次のように返されます：-1,{},GetInRegs(0,4000,3)。

- 説明:** コントローラバージョン3.5.2以降でサポートされています;**。

## 3.45 GetCoils

- 機能：コイルの機能を読み取る。

- 形式：GetCoils(index,addr,count)

- パラメータ数：3

- 対応ポート：29999

- パラメータの詳細

  | パラメータ名|タイプ|意味|
  | ----- | ---- | ----------- |
  | index | int | 返回的主站索引； |
  | addr | int | 视从站配置而定； |
  | count | int | 个数，取值范围1~16 |


- 返回：

  ErrorID,{value1,value2,... ,valuen},GetCoils(index,addr,count); //ErrorID为0表示正常，为-1表示没有获取成功;table，按变量类型返回{value1,value2... ,valuen}

- 示例：

  GetCoils(0,1000,3)

  正常返回：0,{1,1,0},GetCoils(0,1000,3);

  错误返回：-1,{},GetCoils(0,1000,3);

- 说明：**控制器3.5.2版本以及以上版本支持；**

## 3.46 SetCoils

- 機能：Write Coils 機能。

- 形式：SetCoils(index,addr,count,valTab)

- パラメータ数：4個

- 対応ポート：29999

- パラメータの詳細

  | 参数名 | 类型 | 含义 |
  | ------ | ------ | ----------- |
  | index | int | 返回的主站索引； |
  | addr | int | 视从站配置而定； |
  | count | int | 个数，取值范围1~16 |
  | valTab | string | 写线圈地址值； |


- 返回：

  ErrorID,{},SetCoils(index,addr,count,valTab); //ErrorIDは正常なら0、正常に設定できないなら-1。

- 例

  SetCoils(0,1000,3,{1,0,1})

  正常な戻り値：0,{},SetCoils(0,1000,3,{1,0,1})です。

  错误返回：-1,{},SetCoils(0,1000,3,{1,0,1});

- 说明：**控制器3.5.2版本以及以上版本支持；**

## 3.47 GetHoldRegs

- 功能：读保持寄存器。

- 格式：GetHoldRegs(index,*addr*, *count*,valType)

- 参数数量：4

- 支持端口：29999

- 参数详解：

  | 参数名 | 类型 | 含义 |
  | ------- | ------ | ---------------------------------------- |
  | index | int | index,返回的主站索引，最多支持5个设备,取值范围(0~4)； |
  | addr | int | 保持寄存器的起始地址。 视从站配置而定； |
  | count | int | 读取指定数量type类型的数据。 取值范围：1 -4 |
  | valType | string | 数据类型：<br /> 如果为空，默认读取16位无符号整数（2个字节，占用1个寄存器）<br /> U16：读取16位无符号整数（2个字节，占用1个寄存器）<br /> U32：读取32位无符号整数（4个字节，占用2个寄存器）<br /> F32：读取32位单精度浮点数（4个字节，占用2个寄存器）<br /> F64：读取64位双精度浮点数（8个字节，占用4个寄存器） |


- 返回：

  ErrorID,{value1,value2,... ,valuen},GetHoldRegs(index,*addr*, *count*,valType); //ErrorID为0表示正常，为-1表示没有获取成功;table，按变量类型返回{value1,value2... ,valuen}

- 示例：从地址3095开始读取一个16位无符号整数

   GetHoldRegs(0,3095,1)

     正常復帰：0,{13},GetHoldRegs(0,3095,1);

     エラーリターン：-1,{},GetHoldRegs(0,3095,1);

- 説明:** コントローラバージョン3.5.2以降でサポートされています;**。

## 3.48 SetHoldRegs

- 功能：写保存寄存器。

- 格式：SetHoldRegs(index,*addr*, *count*,*valTab*,valType)

- 参数数量：5

- 支持端口：29999

- 参数详解：

  | 参数名     | 类型     | 含义                                       |
  | ------- | ------ | ---------------------------------------- |
  | index   | int    | index,返回的主站索引，最多支持5个设备,取值范围(0~4)         |
  | addr    | int    | 保持寄存器的起始地址。视从站配置而定；                      |
  | count   | int    | 写入指定数量type类型的数据。取值范围：1 ~4                |
  | valTab  | string | 保持寄存器地址的值                                |
  | valType | string | 数据类型     <br /> 如果为空，默认读取16位无符号整数（2个字节，占用1个寄存器） <br /> U16：读取16位无符号整数（2个字节，占用1个寄存器）  <br />U32：读取32位无符号整数（4个字节，占用2个寄存器）   <br />F32：读取32位单精度浮点数（4个字节，占用2个寄存器）    <br /> F64：读取64位双精度浮点数（8个字节，占用4个寄存器） |


- 返回：

  ErrorID,{},SetHoldRegs(index,*addr*, *count*,*valTab*,valType); //ErrorID为0表示正常，为-1表示没有设置成功;

- 示例：从地址3095开始，写入两个16位无符号整数值6000，300

  SetHoldRegs(0,3095,2,{6000,300}, U16)

  正常返回：0,{},SetHoldRegs(0,3095,2,{6000,300}, U16);

  错误返回：-1,{},SetHoldRegs(0,3095,2,{6000,300}, U16);

- 说明：**控制器3.5.2版本以及以上版本支持；**

## 3.49 GetErrorID

- 機能：ロボットエラーコードの取得
- 書式：GetErrorID()
- パラメータ数：0
- 対応ポート：29999


- リターンです。

  ErrorID,{[[id,... ,id], [id], [id], [id], [id], [id], [id]]},GetErrorID(); //[id, ...。 衝突検出値が-2、e-skin衝突検出値が-3、次の6つの[id]は6つのサーボそれぞれのアラーム情報です。

- 例

  GetErrorID()

  リターンです。

   0,{[[-2],[],[],[],[],[],[]]},GetErrorId();

- 注）エラー内容に対応するエラーコードは、コントローラエラー説明ファイル alarm_controller.json およびサーボエラー説明ファイル alarm_servo.json を参照してください。

- コントローラVer.3.5.2以降に対応。


## 3.50 DI

- 機能：デジタル入力ポートの状態を取得します。

- フォーマット：DI(index)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                        |
  | ----- | ---- | ------------------------- |
  | index | int  | 数字输入索引，取值范围：1~32或100~1000 |


- リターンです。

  ErrorID,{value},DI(index); //value:現在のインデックス値の状態を、0/1の範囲で返します。

- 例

  DI(1)

  戻る、デジタル入力ポート1がLow。

  0,{0},DI(1)です。

- 注：値域100-1000を使用するには、拡張IOモジュールのハードウェアサポートが必要です。

## 3.51 ToolDI

- 機能：エンドデジタル入力ポートの状態を取得します。

- 形式：ToolDI(index)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                 |
  | ----- | ---- | ------------------ |
  | index | int  | 末端数字量输入索引，取值范围：1/2 |


- リターンです。

  ErrorID,{value},ToolDI(index); //value：現在のインデックス値の状態を返す、値の範囲は0/1を取る。

- 例

  ツールDI(2)

  リターン、エンドデジタル入力ポート2がHighです。

  0,{1},ToolDI(2)です。

## 3.52 AI

- 機能：アナログ入力ポート電圧値の取得（即値コマンド）

- フォーマット：AI(index)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                 |
  | ----- | ---- | ------------------ |
  | index | int  | 控制柜模拟输入索引，取值范围：1/2 |


- リターンです。

  ErrorID,{value},AI(index); //value:現在のインデックスの電圧値を返す。

- 例

  エーアイ(2)

  アナログ入力ポート2に対して、3.5Vの電圧値を返します。

  0,{3.5},AI(2)です。

## 3.53 ToolAI

- 機能：アナログ入力ポート電圧の終端値を取得（即値コマンド）

- 形式：ToolAI(index)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名   | 类型   | 含义                |
  | ----- | ---- | ----------------- |
  | index | int  | 末端模拟输入索引，取值范围：1/2 |


- リターンです。

  ErrorID,{value},ToolAI(index); //value:現在のインデックスの電圧値を返す。

- 例

  ToolAI(1)

  アナログ入力ポート1に対して、1.5Vの電圧値を返します。

  0,{1.5},ToolAI(1)です。

## 3.54 DIGroup

- 機能：入力グループポートのステータスを取得します。

- 書式：DIGroup(index1,index2,...) ,indexn)。

- パラメータ数：不定（最大64個まで対応）

- 対応ポート：29999

- パラメータ詳細：未確定

  | 参数名    | 类型   | 含义                        |
  | ------ | ---- | ------------------------- |
  | index1 | int  | 数字输入索引，取值范围：1-32或100~1000 |
  | ...    | ...  | ...                       |
  | indexn | int  | 数字输入索引，取值范围：1-32或100~1000 |


- リターンです。

  ErrorID,{value1,value2,.... ,valuen},DIGroup(index1,index2,...)。 ,indexn); //value1...です。 .valuen: index1 から indexn の現在の電圧値を返す。

- 例

  DIGroup(4,6,2,7)

  入力ポート4、6、2、7のレベルはそれぞれ1、0、1、1として返されます。

  0,{1,0,1,1},DIGroup(4,6,2,7);

- 注：値域100-1000を使用するには、拡張IOモジュールのハードウェアサポートが必要です。

## 3.55 DOGroup

- 機能：出力グループポートの状態を設定する

- 書式：DOGroup(index1,value1,index2,value2,...) ,indexn,valuen)。

- パラメータ数：可変（最大64個対応）

- 対応ポート：29999

- パラメータ詳細：未確定

  | 参数名    | 类型   | 含义                          |
  | ------ | ---- | --------------------------- |
  | index1 | int  | 设置数字输出索引，取值范围：1-16或100~1000 |
  | value1 | int  | 设置数字输出端口状态，取值0/1            |
  | ...    | ...  | ...                         |
  | indexn | int  | 设置数字输出索引，取值范围：1-16或100~1000 |
  | valuen | int  | 设置数字输出端口状态，取值0/1            |


- リターンです。

  ErrorID,{},DOGroup(index1,value1,index2,value2,...)。 ,indexn,valuen)である。  

- 例

  DOGroup(4,1,6,0,2,1,7,0)

  出力ポート4、6、2、7をそれぞれ1、0、1、0に設定し、リターンします。

  0,{},DOGroup(4,1,6,0,2,1,7,0);

- 注：値域100-1000を使用するには、拡張IOモジュールのハードウェアサポートが必要です。


## 3.56 BrakeControl

- 機能：ブレーキのオン/オフの切り替え

- フォーマット：BrakeControl(axisID,value)     

- 必須パラメータ数：2個

- 注） **ブレーキ制御は、ロボットがイネーブル状態で行う必要があり、そうでない場合はロボットのエラーで-1が返されます。

- 対応ポート：29999

- 必要なパラメータ詳細：2

  | 参数名    | 类型   | 含义                          |
  | ------ | ---- | --------------------------- |
  | axisID | int  | 关节轴号                        |
  | value  | int  | 设置抱闸状态；取值0/1  0:关闭抱闸 1：打开抱闸 |

- リターンです。

  ErrorID,{},BrakeControl(axisID,value)。 

- 例：オープンジョイント1ブレーキ

  ブレーキコントロール(1,1)

  リターンズ

  0,{},BrakeControl(1,1)です。

  注意：**コントローラバージョン3.5.2以降でサポートされているコマンドです。

## 3.57 StartDrag

- 機能：ドラッグ＆ドロップの入力（エラーレポート状態では、ドラッグ＆ドロップの入力はできません）

- 形式：StartDrag()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},StartDrag()。  

- 例

  StartDrag()

  注意：**このコマンドは特定のバージョンのみでサポートされています**。

## 3.58 StopDrag

- 機能：ドラッグ＆ドロップを停止させる

- 形式：StopDrag()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{},StopDrag()。  

- 例

  StopDrag()

  注意：**このコマンドは特定のバージョンのみでサポートされています**。

## 3.59 SetCollideDrag

- 機能：強制的にドラッグを行うかどうかの設定（エラー状態でもドラッグ可能）

- 形式：SetCollideDrag(status)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名 | 类型 | 含义                                       |
  | ------ | ---- | ------------------------------------------ |
  | status | int  | status：强制拖拽开关状态，0：关闭；1：开启 |


- リターンです。

  ErrorID,{},SetCollideDrag(status)。   

- Samp：強制ドラッグ＆ドロップ

  SetCollideDrag(0)

  説明: **このコマンドは特定のバージョンのみでサポートされています**。

## 3.60 SetTerminalKeys

- 機能：エンドキー機能有効状態の設定

- 書式：SetTerminalKeys(status)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名 | 类型 | 含义                                               |
  | ------ | ---- | -------------------------------------------------- |
  | status | int  | status：设置末端按键功能使能状态，0：关闭；1：开启 |


- リターンです。

  ErrorID,{},SetTerminalKeys(status)。   

- 例：ターミナルキーを無効にする

  SetTerminalKeys(0)

  説明: **このコマンドは特定のバージョンのみでサポートされています**。

## 3.61 SetTerminal485

- 機能：ターミナル485のパラメータを設定する

- 書式：SetTerminal485(baudRate, dataLen, parityBit, stopBit)

- パラメータ数：4個

- 対応ポート：29999

- パラメータ詳細：4

  | 参数名    | 类型   | 含义                                           |
  | --------- | ------ | ---------------------------------------------- |
  | baudRate  | int    | baudRate：波特率                               |
  | dataLen   | int    | dataLen：数据位长度，目前固定为8               |
  | parityBit | string | parityBit：奇偶校验位，目前固定为N，代表无校验 |
  | stopBit   | int    | stopBit: 停止位，目前固定为1                   |


- リターンです。

  ErrorID,{},SetTerminal485(status)です。   

- 例：ボーレートを115200に設定する場合

  SetTerminal485(115200, 8, N, 1)

  注意：**このコマンドは特定のバージョンのみでサポートされています**。

## 3.62 GetTerminal485

- 機能：端末485のパラメータ取得

- 書式：GetTerminal485()

- パラメータ数：0

- 対応ポート：29999

- リターンです。

  ErrorID,{baudRate,dataLen,parityBit,stopBit},GetPose(); //{baudRate,dataLen,parityBit,stopBit} はそれぞれボーレート、データビット、パリティビット、ストップビットを表します。

- 例

  GetTerminal485()

  Return: 0,{115200, 8, N, 1},GetTerminal485()です。

  注意：**このコマンドは特定のバージョンのみでサポートされています**。

## 3.63 ロードスイッチ

- 機能：負荷設定の状態を制御します。

- 形式：LoadSwitch(status)

- パラメータ数：1

- 対応ポート：29999

- パラメータ詳細： 1

  | 参数名 | 类型 | 含义                                                         |
  | ------ | ---- | ------------------------------------------------------------ |
  | status | int  | status：设置负载设置状态，0：关闭；1：开启，开启负载设置会提高碰撞灵敏度 |

- リターンです。

  ErrorID,{},LoadSwitch(status)。   

- 例

  LoadSwitch(1) // 負荷の設定を有効にする

  



# 4.通信プロトコル ---- リアルタイムフィードバックポート

ポート30004は、リアルタイムフィードバックポート（ポート30004、30005、30006はコントローラバージョン3.5.2+でサポートされます）、下表のように、クライアントが**8msに一度ロボットから情報を受け取ることができます。30005サーバーポートは、**200msに一度ロボットから情報を送り、ポート30006は、**8msに一度ロボットから情報を受け取ります。 ロボット情報のフィードバック用の**設定可能な**ポート（デフォルトは**50ms**ごとのフィードバック）；リアルタイムフィードバックポート経由でパケットを受信するたびに1440バイトがあり、それらは標準フォーマットで配置されている。 バイトの並び順は次のとおりである。 (ポート30006のリアルタイムデータに対する設定更新は、オンラインで変更してリアルタイムに反映させることができる;)

|      意义/Meaning      |   数据类型/Type    | 值的数目/Number of values | 字节大小/Size in bytes | 字节位置值/Byte position value |                 描述/Notes                 |
| :------------------: | :------------: | :-------------------: | :----------------: | :-----------------------: | :--------------------------------------: |
|     MessageSize      | unsigned short |           1           |         2          |        0000 ~ 0001        |  消息字节总长度/Total message length in bytes   |
|                      | unsigned short |           3           |         6          |        0002 ~ 0007        |                   保留位                    |
|    DigitalInputs     |     uint64     |           1           |         8          |        0008 ~ 0015        | 数字输入/Current state of the digital inputs. |
|    DigitalOutputs    |     uint64     |           1           |         8          |        0016 ~ 0023        |                   数字输出                   |
|      RobotMode       |     uint64     |           1           |         8          |        0024 ~ 0031        |             机器人模式/Robot mode             |
|      TimeStamp       |     uint64     |           1           |         8          |        0032 ~ 0039        |                时间戳（单位ms）                 |
|                      |     uint64     |           1           |         8          |        0040 ~ 0047        |                   保留位                    |
|      TestValue       |     uint64     |           1           |         8          |        0048 ~ 0055        |     内存结构测试标准值  0x0123 4567 89AB CDEF     |
|                      |     double     |           1           |         8          |        0056 ~ 0063        |                   保留位                    |
|     SpeedScaling     |     double     |           1           |         8          |        0064 ~ 0071        | 速度比例/Speed scaling of the trajectory limiter |
|  LinearMomentumNorm  |     double     |           1           |         8          |        0072 ~ 0079        | 机器人当前动量/Norm of Cartesian linear momentum(需要特定硬件版本) |
|        VMain         |     double     |           1           |         8          |        0080 ~ 0087        |     控制板电压/Masterboard: Main voltage      |
|        VRobot        |     double     |           1           |         8          |        0088 ~ 0095        |  机器人电压/Masterboard: Robot voltage (48V)  |
|        IRobot        |     double     |           1           |         8          |        0096 ~ 0103        |     机器人电流/Masterboard: Robot current     |
|                      |     double     |           1           |         8          |        0104 ~ 0111        |                   保留位                    |
|                      |     double     |           1           |         8          |        0112 ~ 0119        |                   保留位                    |
|  ToolAcceleroMeter   |     double     |           3           |         24         |        0120 ~ 0143        | TCP加速度/Tool x,y and z accelerometer values(需要特定硬件版本) |
|    ElbowPosition     |     double     |           3           |         24         |        0144 ~ 0167        |       肘位置/Elbow position(需要特定硬件版本)       |
|    ElbowVelocity     |     double     |           3           |         24         |        0168 ~ 0191        |       肘速度/Elbow velocity(需要特定硬件版本)       |
|       QTarget        |     double     |           6           |         48         |        0192 ~ 0239        |      目标关节位置/Target joint positions       |
|       QDTarget       |     double     |           6           |         48         |        0240 ~ 0287        |      目标关节速度/Target joint velocities      |
|      QDDTarget       |     double     |           6           |         48         |        0288 ~ 0335        |    目标关节加速度/Target joint accelerations    |
|       ITarget        |     double     |           6           |         48         |        0336 ~ 0383        |       目标关节电流/Target joint currents       |
|       MTarget        |     double     |           6           |         48         |        0384 ~ 0431        |  目标关节扭矩/Target joint moments (torques)   |
|       QActual        |     double     |           6           |         48         |        0432 ~ 0479        |      实际关节位置/Actual joint positions       |
|       QDActual       |     double     |           6           |         48         |        0480 ~ 0527        |      实际关节速度/Actual joint velocities      |
|       IActual        |     double     |           6           |         48         |        0528 ~ 0575        |       实际关节电流/Actual joint currents       |
|    ActualTCPForce    |     double     |           6           |         48         |        0576 ~ 0623        |            TCP传感器力值(通过六维力计算)             |
|   ToolVectorActual   |     double     |           6           |         48         |        0624 ~ 0671        | TCP笛卡尔实际坐标值/Actual Cartesian coordinates of the tool: (x,y,z,rx,ry,rz), where rx, ry and rz is a rotation vector representation of the tool orientation |
|    TCPSpeedActual    |     double     |           6           |         48         |        0672 ~ 0719        | TCP笛卡尔实际速度值/Actual speed of the tool given in Cartesian coordinates |
|       TCPForce       |     double     |           6           |         48         |        0720 ~ 0767        |             TCP力值（通过关节电流计算）              |
|   ToolVectorTarget   |     double     |           6           |         48         |        0768 ~ 0815        | TCP笛卡尔目标坐标值/Target Cartesian coordinates of the tool: (x,y,z,rx,ry,rz), where rx, ry and rz is a rotation vector representation of the tool orientation |
|    TCPSpeedTarget    |     double     |           6           |         48         |        0816 ~ 0863        | TCP笛卡尔目标速度值/Target speed of the tool given in Cartesian coordinates |
|  MotorTemperatures   |     double     |           6           |         48         |        0864 ~ 0911        | 关节温度/Temperature of each joint in degrees celsius |
|      JointModes      |     double     |           6           |         48         |        0912 ~ 0959        |        关节控制模式/Joint control modes        |
|       VActual        |     double     |           6           |         48         |        960  ~ 1007        |        关节电压/Actual joint voltages        |
|       HandType       |      char      |           4           |         4          |        1008 ~ 1011        |                    手系                    |
|         User         |      char      |           1           |         1          |           1012            |                   用户坐标                   |
|         Tool         |      char      |           1           |         1          |           1013            |                   工具坐标                   |
|     RunQueuedCmd     |      char      |           1           |         1          |           1014            |                 算法队列运行标志                 |
|     PauseCmdFlag     |      char      |           1           |         1          |           1015            |                 算法队列暂停标志                 |
|    VelocityRatio     |      char      |           1           |         1          |           1016            |              关节速度比例(0~100)               |
|  AccelerationRatio   |      char      |           1           |         1          |           1017            |              关节加速度比例(0~100)              |
|      JerkRatio       |      char      |           1           |         1          |           1018            |             关节加加速度比例(0~100)              |
|   XYZVelocityRatio   |      char      |           1           |         1          |           1019            |             笛卡尔位置速度比例(0~100)             |
|    RVelocityRatio    |      char      |           1           |         1          |           1020            |             笛卡尔姿态速度比例(0~100)             |
| XYZAccelerationRatio |      char      |           1           |         1          |           1021            |            笛卡尔位置加速度比例(0~100)             |
|  RAccelerationRatio  |      char      |           1           |         1          |           1022            |            笛卡尔姿态加速度比例(0~100)             |
|     XYZJerkRatio     |      char      |           1           |         1          |           1023            |            笛卡尔位置加加速度比例(0~100)            |
|      RJerkRatio      |      char      |           1           |         1          |           1024            |            笛卡尔姿态加加速度比例(0~100)            |
|     BrakeStatus      |      char      |           1           |         1          |           1025            |                 机器人抱闸状态                  |
|     EnableStatus     |      char      |           1           |         1          |           1026            |                 机器人使能状态                  |
|      DragStatus      |      char      |           1           |         1          |           1027            |                 机器人拖拽状态                  |
|    RunningStatus     |      char      |           1           |         1          |           1028            |                 机器人运行状态                  |
|     ErrorStatus      |      char      |           1           |         1          |           1029            |                 机器人报警状态                  |
|      JogStatus       |      char      |           1           |         1          |           1030            |                 机器人点动状态                  |
|      RobotType       |      char      |           1           |         1          |           1031            |                   机器类型                   |
|   DragButtonSignal   |      char      |           1           |         1          |           1032            |                 按钮板拖拽信号                  |
|  EnableButtonSignal  |      char      |           1           |         1          |           1033            |                 按钮板使能信号                  |
|  RecordButtonSignal  |      char      |           1           |         1          |           1034            |                 按钮板录制信号                  |
| ReappearButtonSignal |      char      |           1           |         1          |           1035            |                 按钮板复现信号                  |
|   JawButtonSignal    |      char      |           1           |         1          |           1036            |                按钮板夹爪控制信号                 |
|    SixForceOnline    |      char      |           1           |         1          |           1037            |                 六维力在线状态                  |
|     Reserve2[82]     |      char      |           1           |         82         |         1038-1119         |                   保留位                    |
|      MActual[6]      |     double     |           6           |         48         |        1120 ~ 1167        |                   实际扭矩                   |
|         Load         |     double     |           1           |         8          |         1168-1175         |                  负载重量kg                  |
|       CenterX        |     double     |           1           |         8          |         1176-1183         |                X方向偏心距离mm                 |
|       CenterY        |     double     |           1           |         8          |         1184-1191         |                Y方向偏心距离mm                 |
|       CenterZ        |     double     |           1           |         8          |         1192-1199         |                Z方向偏心距离mm                 |
|       User[6]        |     double     |           6           |         48         |         1200-1247         |                  用户坐标值                   |
|       Tool[6]        |     double     |           6           |         48         |         1248-1295         |                  工具坐标值                   |
|      TraceIndex      |     double     |           1           |         8          |         1296-1303         |                 轨迹复现运行索引                 |
|   SixForceValue[6]   |     double     |           6           |         48         |         1304-1351         |                当前六维力数据原始值                |
| TargetQuaternion[4]  |     double     |           4           |         32         |         1352-1383         |           [qw,qx,qy,qz] 目标四元数            |
| ActualQuaternion[4]  |     double     |           4           |         32         |         1384-1415         |           [qw,qx,qy,qz]  实际四元数           |
|     Reserve3[24]     |      char      |           1           |         24         |        1416 ~ 1440        |                   保留位                    |
|        TOTAL         |                |                       |        1440        |                           |             1440byte package             |

其中Robot Mode返回机器人模式：                        

| 模式   | 描述                    | 备注         |
| ---- | --------------------- | ---------- |
| 1    | ROBOT_MODE_INIT       | 初始化        |
| 2    | ROBOT_MODE_BRAKE_OPEN | 抱闸松开       |
| 3    |                       | 保留位        |
| 4    | ROBOT_MODE_DISABLED   | 未使能(抱闸未松开) |
| 5    | ROBOT_MODE_ENABLE     | 使能(空闲)     |
| 6    | ROBOT_MODE_BACKDRIVE  | 拖拽         |
| 7    | ROBOT_MODE_RUNNING    | 运行状态       |
| 8    | ROBOT_MODE_RECORDING  | 拖拽录制       |
| 9    | ROBOT_MODE_ERROR      | 报警         |
| 10   | ROBOT_MODE_PAUSE      | 暂停状态       |
| 11   | ROBOT_MODE_JOG        | 点动         |

- 説明
  - [ ] 保持ブレーキ開放、状態 2.
  - [ ] 本体下部の有効化、状態4
  - [ ] Enabled successfully, status 5.
  - [ ] ロボット動作中、ステータス 7.
  - [ ] ロボット一時停止中、ステータス10。
  - [ ]ドラッグモード（有効状態）になり、状態6
  - [ ] ドラッグ録音中のロボット、ステータス 8.
  - [ ] ロボットがポインティングしている、状態11
  - [ ]内はアラームの優先順位が最も高く、他の状態が同時に存在する場合は、アラームがある場合は先に9に設定されます。

- BrakeStatus はブレーキを保持する。

  0x01 は、第 6 軸目ブレーキが開放されていることを示す。

  0x02 は、第 5 軸目のブレーキが開放されていることを意味します。

  0x03 は、第 5 軸目または第 6 軸目のブレーキが開放されていることを示す。

  0x04 は、第4軸ブレーキが開放されていることを示します。

  ...

  以下のビットが保持ブレーキ状態を示します。

  | 7    | 6    | 5    | 4    | 3    | 2    | 1    | 0    |
  | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
  | 保留位  | 保留位  | 关节一  | 关节二  | 关节三  | 关节四  | 关节五  | 关节六  |

- JointModes ジョイント制御モード。

  現在値8はポジションモードであることを示します。

  ここで、現在の値が10であればモーメントモードを示す。

- ここで、RobotType は機械の種類を示す。

  | RobotType值 | 代表机型  |
  | ---------- | ----- |
  | 3          | CR3   |
  | 31         | CR3L  |
  | 5          | CR5   |
  | 7          | CR7   |
  | 10         | CR10  |
  | 12         | CR12  |
  | 16         | CR16  |
  | 1          | MG400 |
  | 2          | M1Pro |

  

  


# 5.通信プロトコル ---- モーション関連ポート

ホストコンピュータは、ポート 30003 を介してロボットの動作に関連するいくつかのコマンドを直接ロボットに送信することができ、これらのコマンドは CR 自身によって定義されています。 ロボットの動作関連の制御は、以下のコマンドで実現できます。

| 指令           | 描述                           |
| ------------ | ---------------------------- |
| MovJ         | 直交する点の位置を目標点とする点間移動             |
| MovL         | 直交する点の位置を目標点とした直進運動              |
| JointMovJ    | 関節部に目標点を設定した点間運動              |
| Jump         | ゲート式移動、直交点位置のみサポート                |
| RelMovJ      | 直交オフセット位置へのポイントツーポイント移動             |
| RelMovL      | 直交オフセット位置への直線移動                |
| MovLIO       | 直線運動中のデジタル出力ポートの状態を並列に設定し、複数のグループを設定することが可能   |
| MovJIO       | ポイントツーポイント移動中のデジタル出力ポートの状態を並列に設定、複数グループの設定も可能  |
| Arc          | 円運動。 円運動は、他の運動コマンドと組み合わせる必要があります。         |
| Circle       | 全周運動、他の運動コマンドと組み合わせて全周運動を完成させるためのもの         |
| ServoJ       | 関節スペースに応じた動的な追従コマンド                |
| ServoP       | 直交座標系に基づく動的後続コマンド               |
| MoveJog      | オフノード移動                         |
| StartTrace   | トラジェクトリーフィッティング                         |
| StartPath    | トラック再生                         |
| StartFCTrace | 力制御による軌道修正                     |
| RelMovJTool  | ツール座標系に沿った相対的な動きで、端の動きは関節の動きの形をしている     |
| RelMovLTool  | ツール座標系に沿った相対運動コマンド、リニアエンドムーブメント付き   |
| RelMovJUser  | ユーザーの座標系に沿った相対的な動作指令、関節端の動きあり   |
| RelMovLUser  | ユーザーの座標系に沿った相対的な動作コマンドと、直線的な終端動作   |
| RelJointMovJ | 各軸の関節座標系に沿った相対的な運動指令で、関節の動きで終止符を打つ。 |




## 5.1 MovJ

- 機能：直交する点の位置を目標点位置とする点間移動。

- 形式：MovJ(X,Y,Z,Rx,Ry,Rz,User=index,Tool=index,SpeedJ=R,AccJ=R)。  

  // User=index,Tool=index,SpeedJ=R,AccJ=R はそれぞれユーザー座標系、ツール座標系、ジョイント速度比、加速度比の設定を意味するオプションパラメータです; ポート 29999 で設定された SpeedJ と AccJ と同じ意味; User: ユーザーインデックス 0~9、最後に従って記入されていない。 ユーザー：ユーザーインデックス0～9、最後の設定により未入力、ツール：ツールインデックス0～9、最後の設定により未入力。

- 必須パラメータ数：6個

- 対応ポート：30003

- 必要なパラメータ詳細：6

  | 参数名  | 类型     | 含义          |
  | ---- | ------ | ----------- |
  | X    | double | X 轴位置，单位：毫米 |
  | Y    | double | Y 轴位置，单位：毫米 |
  | Z    | double | Z 轴位置，单位：毫米 |
  | Rx   | double | Rx 轴位置，单位：度 |
  | Ry   | double | Ry 轴位置，单位：度 |
  | Rz   | double | Rz 轴位置，单位：度 |

- リターンです。

  ErrorID,{},MovJ(X,Y,Z,Rx,Ry,Rz);   

- 例

  MovJ(-500,100,200,150,0,90,AccJ=50)

  リターンです。

  ErrorID,{},MovJ(-500,100,200,150,0,90,AccJ=50);   



## 5.2 MovL

- 機能：直交する点の位置を目標点位置とする直線運動。

- 形式：MovL(X,Y,Z,Rx,Ry,Rz,User=index,Tool=index,SpeedL=R,AccL=R)。 

  User=index,Tool=index,SpeedL=R,AccL=R は任意パラメータで、それぞれユーザー座標系、ツール座標系、直交速度スケール、加速度スケールの設定を意味します；ポート 29999 の SpeedL と AccL と同じ意味；ユーザー：ユーザーインデックス 0~9、最後の設定に従って記入しない；ツール：ツールインデックス 0~9, 最後の設定に従って記入しない。 ユーザー：ユーザーインデックス0～9、最後の設定により未入力、ツール：ツールインデックス0～9、最後の設定により未入力。

- 必須パラメータ数：6個

- 対応ポート：30003

- 必要なパラメータ詳細：6

  | 参数名  | 类型     | 含义          |
  | ---- | ------ | ----------- |
  | X    | double | X 轴位置，单位：毫米 |
  | Y    | double | Y 轴位置，单位：毫米 |
  | Z    | double | Z 轴位置，单位：毫米 |
  | Rx   | double | Rx 轴位置，单位：度 |
  | Ry   | double | Ry 轴位置，单位：度 |
  | Rz   | double | Rz 轴位置，单位：度 |

- リターンです。

  ErrorID,{},MovL(X,Y,Z,Rx,Ry,Rz,SpeedL=R,AccL=R)。  

- 例

  MovL(-500,100,200,150,0,90,SpeedL=60)

  リターンです。

  ErrorID,{},MovL(-500,100,200,150,0,90,SpeedL=60);   

## 5.3 JointMovJ

- 機能：目標点位置を関節点位置とする点間運動。

- フォーマット：JointMovJ(J1,J2,J3,J4,J5,J6,User=index,Tool=index,SpeedJ=R,AccJ=R)． 

  /SpeedJ=R、AccJ=R は任意パラメータで、それぞれユーザー座標系、ツール座標系、ジョイント速度比、加速度比の設定を意味する; ポート 29999 の SpeedJ と AccJ と同じ意味; User:User index 0~9、最後の設定値に従って記入しない; Tool:Tool index 0~9、最後の設定値に従って記入しない; ポート 29999 の SpeedJ と AccJ と同じ意味 最後に設定した値。

- 必須パラメータ数：6個

- 対応ポート：30003

- 必要なパラメータ詳細：6

  | 参数名  | 类型     | 含义          |
  | ---- | ------ | ----------- |
  | J1   | double | J1 轴位置，单位：度 |
  | J2   | double | J2 轴位置，单位：度 |
  | J3   | double | J3 轴位置，单位：度 |
  | J4   | double | J4 轴位置，单位：度 |
  | J5   | double | J5 轴位置，单位：度 |
  | J6   | double | J6 轴位置，单位：度 |

- リターンです。

  ErrorID,{},JointMovJ(J1,J2,J3,J4,J5,J6,SpeedJ=R,AccJ=R).J1,J2,J3,J4,J5,J6,SpeedJ=R,AccJ=R);   

- 例

  JointMovJ(0,0,-90,0,90,0,SpeedJ=60,AccJ=50)

  リターンです。

  ErrorID,{},JointMovJ(0,0,-90,0,90,0,SpeedJ=60,AccJ=50);   

## 4.4 Jump

注意： **この命令は一時的に非推奨です。

## 4.5 RelMovJ

- 機能：デカルトオフセット位置へポイントツーポイント方式で移動する。

- 形式：RelMovJ（offsetX,offsetY,offsetZ,offsetRx,offsetRy,offsetRz,User=index,Tool=index,SpeedJ=R,AccJ=R）。 

  /SpeedJ=R、AccJ=Rはオプションのパラメータで、それぞれユーザー座標系、ツール座標系、ジョイント速度比、加速度比の設定を意味します；ポート29999のSpeedJ、AccJと同じ意味です；ユーザー:ユーザーインデックス0~9、最後の設定値に従って記入しない；ツール:ツールインデックス0~9、最後の設定値に従って記入しない；ポート29999のSpeedJ、AccJと同じ意味です；ユーザー:ユーザーインデックス0~9、最後の設定値に従って記入しない；ツール:ツールインデックス0~9、最後の設定値に従って記入しない；最後に決めた値です；最後のセット値です；。 最後に設定した値。

- 必須パラメータ数：6個

- 対応ポート：30003

- 必要なパラメータ詳細：6

  | 参数名      | 类型     | 含义           |
  | -------- | ------ | ------------ |
  | offsetX  | double | X轴方向偏移，单位：mm |
  | offsetY  | double | Y轴方向偏移，单位：mm |
  | offsetZ  | double | Z轴方向偏移，单位：mm |
  | offsetRx | double | Rx 轴位置，单位：度  |
  | offsetRy | double | Ry 轴位置，单位：度  |
  | offsetRz | double | Rz 轴位置，单位：度  |

- リターンです。

  ErrorID,{},RelMovJ(offsetX,offsetY,offsetZ,offsetRx,offsetRy,offsetRz,SpeedJ=R,AccJ=R)。

- 例

  RelMovJ(10,10,10,10,10,10,10)

- 注意： **この命令は一時的に非推奨です。

## 4.6 RelMovL

- 機能：直交オフセット位置へ直線移動する。

- フォーマット：RelMovL(offsetX,offsetY,offsetZ,User=index,Tool=index,SpeedL=R,AccL=R)。 

  // SpeedL=R、AccL=R は任意パラメータで、それぞれユーザー座標系、ツール座標系、直交速度スケール、加速度スケールの設定を意味する; ポート 29999 で設定した SpeedL と AccL と同じ意味; User:User index 0~9、最後の設定値に従って記入しない; Tool:Tool index 0~9、最後の設定値に従って記入しない; ポート 29999 で設定した SpeedL と AccL と同じ意味; User:User index 0~9,not filling according to last set value 前回設定した値

- 必須パラメータ数：3個

- 対応ポート：30003

- 必要なパラメータ詳細：3

  | 参数名     | 类型     | 含义           |
  | ------- | ------ | ------------ |
  | offsetX | double | X轴方向偏移，单位：mm |
  | offsetY | double | Y轴方向偏移，单位：mm |
  | offsetZ | double | Z轴方向偏移，单位：mm |

- リターンです。

  ErrorID,{},RelMovL(offsetX,offsetY,offsetZ,SpeedL=R,AccL=R)。

- 例

  RelMovL(10,10,10)

- 注意： **この命令は一時的に非推奨です。

## 4.7 MovLIO

- 機能：直動時にデジタル出力ポートの状態を並列に設定し、目標点位置は直交点位置とする。

- Format: MovLIO(X,Y,Z,Rx,Ry,Rz,{Mode,Distance,Index,Status},...) ,{モード,距離,インデックス,ステータス},ユーザ=インデックス,ツール=インデックス,スピードL=R,アクセルL=R) 

   /SpeedL=R、AccL=Rはオプションのパラメータで、それぞれユーザー座標系、ツール座標系、直交速度スケール、加速度スケールの設定を意味します；ポート29999のSpeedL、AccLと同じ意味；ユーザー：ユーザーインデックス0~9、最後の設定値に従って記入しない；ツール：ツールインデックス0~9、最後の設定値に従って記入しない；ポート29999のSpeedLとAccLと同じ意味；ユーザー：ユーザーインデックス0~9、最後の設定値に従って記入しない；ツール：ツールインデックス0~9、最後の設定値に従って記入しない；最後の設定値；最後の設定値 前回設定した値

- パラメータ数：10個

- 対応ポート：30003

- パラメータ詳細：10

  | 参数名      | 类型     | 含义                                       |
  | -------- | ------ | ---------------------------------------- |
  | X        | double | X 轴位置，单位：毫米                              |
  | Y        | double | Y 轴位置，单位：毫米                              |
  | Z        | double | Z 轴位置，单位：毫米                              |
  | Rx       | double | Rx 轴位置，单位：度                              |
  | Ry       | double | Ry 轴位置，单位：度                              |
  | Rz       | double | Rz 轴位置，单位：度                              |
  | Mode     | int    | 设置Distance模式，0：Distance为距离百分比；1：Distance为离起始点或目标点的距离 |
  | Distance | int    | 运行指定的距离:  若Mode为0，则Distance表示起始点与目标点之间距离的百分比，取值范围：0~100; 若Distance取值为正，则表示离起始点的距离; 若Distance取值为负，则表示离目标点的距离 |
  | Index    | int    | 数字输出索引，取值范围：1~24                         |
  | Status   | int    | 数字输出状态，取值范围：0或1                          |

- リターンです。

  ErrorID,{},MovLIO(X,Y,Z,Rx,Ry,Rz,{Mode,Distance,Index,Status},...) ,{Mode,Distance,Index,Status},SpeedL=R,AccL=R)。

- 例

  MovLIO(-500,100,200,150,0,90,{0,50,1,0})

## 4.8 MovJIO

- 機能：点間移動中にデジタル出力ポートの状態を並列に設定する、目標点位置は直交点位置。

- Format: MovJIO(X,Y,Z,Rx,Ry,Rz,{Mode,Distance,Index,Status},... ,{モード,距離,インデックス,ステータス},ユーザ=インデックス,ツール=インデックス,スピードJ=R,アクセルJ=R)  

  /SpeedJ=R、AccJ=R は任意パラメータで、それぞれユーザー座標系、ツール座標系、ジョイント速度比、加速度比の設定を意味します；ポート 29999 の SpeedJ と AccJ と同じ意味；ユーザー：ユーザーインデックス 0~9、最後の設定値に従って記入しない；ツール：ツールインデックス 0~9、最後の設定値に従って記入しない；ポート 29999 の SpeedJ と AccJ と同じ意味；ユーザー：ユーザーインデックス 0~9、最後の設定値に従って記入しない；ツール：ツールインデックス 0~9, 最後の設定値に従って記入しない。 には、前回設定した値が入ります。

- パラメータ数：不定

- 対応ポート：30003

- パラメータ詳細：10

  | 参数名      | 类型     | 含义                                       |
  | -------- | ------ | ---------------------------------------- |
  | X        | double | X 轴位置，单位：毫米                              |
  | Y        | double | Y 轴位置，单位：毫米                              |
  | Z        | double | Z 轴位置，单位：毫米                              |
  | Rx       | double | Rx轴位置，单位：度                               |
  | Ry       | double | Ry 轴位置，单位：度                              |
  | Rz       | double | Rz轴位置，单位：度                               |
  | Mode     | int    | 设置Distance模式，0：Distance为距离百分比；1：Distance为离起始点或目标点的距离 |
  | Distance | int    | 运行指定的距离:  若Mode为0，则Distance表示起始点与目标点之间距离的百分比，取值范围：0~100; 若Distance取值为正，则表示离起始点的距离; 若Distance取值为负，则表示离目标点的距离 |
  | Index    | int    | 数字输出索引，取值范围：1~24                         |
  | Status   | int    | 数字输出状态，取值范围：0或1                          |

- リターンです。

  ErrorID,{},MovJIO(X,Y,Z,Rx,Ry,Rz,{Mode,Distance,Index,Status},...) ,{Mode,Distance,Index,Status},SpeedJ=R,AccJ=R)。

- 例

  MovJIO(-500,100,200,150,0,90,{0,50,1,0})

# 4.9 Arc

- Function:: 直交座標系において、現在位置から目標位置まで円弧補間で移動する。

  この命令は、他の動作命令と組み合わせて円弧の始点を決定する必要がある。

- フォーマット：Arc(X1,Y1,Z1,Rx1,Ry1,Rz1,X2,Y2,Z2,Rx2,Ry2,Rz2,User＝index,Tool＝index,SpeedL＝R,AccL＝R)  

  //ここで、SpeedL=R, AccL=Rはオプションのパラメータで、それぞれユーザー座標系、ツール座標系、直交速度スケール、加速度スケールの設定を意味します；ポート29999で設定したSpeedL, AccLと同じ意味です；ユーザー：ユーザーインデックス0~9、最後の設定値に従って入力されていない；ツール：ツールインデックス0~9、最後の設定値に従って入力されていない；ツール：ツールインデックス0~9、最後の設定値に従って入力されていない；ユーザー：ツールインデックス0~9、最後の設定値に従って入力されていない 前回設定した値

- 必須パラメータ数：12個

- 対応ポート：30003

- 必要なパラメータ詳細：12

  | 参数名  | 类型     | 含义                  |
  | ---- | ------ | ------------------- |
  | X1   | double | 表示圆弧中间点X1 轴位置，单位：毫米 |
  | Y1   | double | 表示圆弧中间点Y1 轴位置，单位：毫米 |
  | Z1   | double | 表示圆弧中间点Z1 轴位置，单位：毫米 |
  | Rx1  | double | 表示圆弧中间点Rx1轴位置，单位：度  |
  | Ry1  | double | 表示圆弧中间点Ry1轴位置，单位：度  |
  | Rz1  | double | 表示圆弧中间点Rz1轴位置，单位：度  |
  | X2   | double | 表示圆弧结束点X2 轴位置，单位：毫米 |
  | Y2   | double | 表示圆弧结束点Y2 轴位置，单位：毫米 |
  | Z2   | double | 表示圆弧结束点Z2 轴位置，单位：毫米 |
  | Rx2  | double | 表示圆弧结束点Rx2轴位置，单位：度  |
  | Ry2  | double | 表示圆弧结束点Ry2轴位置，单位：度  |
  | Rz2  | double | 表示圆弧结束点Rz2 轴位置，单位：度 |

- リターンです。

  ErrorID,{},Arc(X1,Y1,Z1,Rx1,Ry1,Rz1,X2,Y2,Z2,Rx2,Ry2,Rz2,SpeedL=R,AccL=R)。

- 例

## 4.10 Circle

- 機能：：全体の円の動き、全体の円の動きを完了するために、他のモーションの命令と組み合わせる必要があります。

- Format: Circle(count,X1,Y1,Z1,Rx1,Ry1,Rz1,X2,Y2,Z2,Rx2,Ry2,Rz2,User=index,Tool=index,SpeedL=R,AccL=R) // SpeedL=R,AccL=R はオプションパラメータ、つまり設定します。 ユーザー座標系、ツール座標系、直交速度比、加速度比；ポート29999で設定したSpeedL、AccLと同じ意味；ユーザー：ユーザーインデックス0～9、最後の設定値により未記入；ツール：ツールインデックス0～9、最後の設定値により未記入。

- 必須パラメータ数：13個

- 対応ポート：30003

- 必要なパラメータ詳細：13

  | 参数名   | 类型     | 含义           |
  | ----- | ------ | ------------ |
  | count | int    | 整圆个数         |
  | X1    | double | X1 轴位置，单位：毫米 |
  | Y1    | double | Y1 轴位置，单位：毫米 |
  | Z1    | double | Z1 轴位置，单位：毫米 |
  | Rx1   | double | Rx1轴位置，单位：度  |
  | Ry1   | double | Ry1轴位置，单位：度  |
  | Rz1   | double | Rz1轴位置，单位：度  |
  | X2    | double | X2 轴位置，单位：毫米 |
  | Y2    | double | Y2 轴位置，单位：毫米 |
  | Z2    | double | Z2 轴位置，单位：毫米 |
  | Rx2   | double | Rx2轴位置，单位：度  |
  | Ry2   | double | Ry2轴位置，单位：度  |
  | Rz2   | double | Rz2轴位置，单位：度  |

- リターンです。

  ErrorID,{},Circle(count,X1,Y1,Z1,Rx1,Ry1,Rz1,X2,Y2,Z2,Rx2,Ry2,Rz2,SpeedL=R,AccL=R)。

- 例

- 注意： **この命令は一時的に非推奨です。



# 4.11 ServoJ

- 機能：関節空間を利用した動的な追従コマンド。

- フォーマット：ServoJ(J11,J12,J13,J14,J15,J16)  

- 必須パラメータ数：6個

- 対応ポート：30003

- 必須パラメータの詳細：6

  | 参数名  | 类型     | 含义              |
  | ---- | ------ | --------------- |
  | J11  | double | 点J11 轴位置，单位：度   |
  | J12  | double | P1点J12 轴位置，单位：度 |
  | J13  | double | P1点J13 轴位置，单位：度 |
  | J14  | double | P1点J14 轴位置，单位：度 |
  | J15  | double | P1点J15 轴位置，单位：度 |
  | J16  | double | P1点J16 轴位置，单位：度 |

- 戻る。

  なし

- 例

  ServoJ(0,0,-90,0,90,0)
  
  解説：二次現像の推奨周波数は33Hz（30ms）、つまり周期は30ms以上に設定する必要があります。

# # 4.12 ServoP

- 機能：デカルト空間に基づく動的な追従コマンド。

- フォーマット：ServoP(X1,Y1,Z1,Rx1,Ry1,Rz1)

- パラメータ数：6個

- 対応ポート：30003

- パラメータ詳細：6

  | 参数名  | 类型     | 含义           |
  | ---- | ------ | ------------ |
  | X1   | double | X 1轴位置，单位：毫米 |
  | Y1   | double | Y 1轴位置，单位：毫米 |
  | Z1   | double | Z1 轴位置，单位：毫米 |
  | Rx1  | double | Rx 1轴位置，单位：度 |
  | Ry1  | double | Ry1 轴位置，单位：度 |
  | Rz1  | double | Rz1轴位置，单位：度  |

- リターンです。

  なし

- 例

  ServoP(-500,100,200,150,0,90)
  
  解説：二次現像の推奨周波数は33Hz（30ms）、つまり周期は30ms以上に設定する必要があります。


## 4.13 MoveJog

- 機能：定距離移動ではなく、ポイント移動

- 形式：MoveJog(axisID,CoordType=typeValue,User=index,Tool=index)    

   // ここで、CoordType, User, Tool はオプションのパラメータで、デフォルト値では埋められない； CoordType: 1: ユーザ座標系 2: ツール座標系、デフォルト値は1； User: ユーザインデックス0~9、デフォルト値は0； Tool: ツールインデックス0~9、デフォルト値は0。

- 必須パラメータ数：1

- 対応ポート：30003

- **注意：コマンド発行後、ロボットの動作を停止させるためには、別途 MoveJog() stop コマンドを発行する必要があります。指定しない文字列内容で別のパラメータを発行すると、ロボットが停止します。**完全停止には、約100msの消費時間が必要です。

- 必須パラメータ：1

  | 参数名 | 类型 | 含义 |
  | ------ | ------ | ---------------------------------------- |
  | axisID | string | 点动运动轴<br />J1+ 表示关节1正方向运动 J1- 表示关节1负方向运动 <br />J2+ 表示关节2正方向运动 J2- 表示关节2负方向运动<br />J3+ 表示关节3正方向运动 J3- 表示关节3负方向运动<br />J4+ 表示关节4正方向 运动 J4- 表示关节4负方向运动<br />J5+ 表示关节5正方向运动 J5- 表示关节5负方向运动<br />J6+ 表示关节6正方向运动 J6- 表示关节6负方向运动<br />X+ 表示X轴正方向运动 X- 表示X轴负方向运动 <br />Y+ 表示Y轴正方向运动 Y- 表示Y轴负方向 运动<br />Z+ 表示Z轴正方向运动 Z- 表示Z轴负方向运动<br />Rx+ 表示Rx轴正方向运动 Rx- 表示Rx轴负方向运动<br />Ry+ 表示Ry轴正方向运动 Ry- 表示Ry轴负方向运动<br />Rz+ 表示Rz轴正方向运动 Rz- 表示Rz轴负方向运动<br /> |

- リターンです。

  ErrorID,{},MoveJog(axisID,CoordType=typeValue,User=index,Tool=index);  

  ErrorID が -1 を返した場合、設定されたユーザー座標インデックスまたはツール座標インデックスが存在しないことを示す。

- 例：J2がマイナス方向に移動し、ポインティングが停止した場合

  ムーブジョグ(j2-)

  リターンです。

  0,{},MoveJog(j2-)です。

  ムーブジョグ()

  リターンです。

  0,{},MoveJog()。

  注意： **このコマンドは、コントローラバージョン3.5.2以上でサポートされています。 **オプションのパラメータCoordType、User、Toolは、ユーザーがジョイントを再実行するために送信した場合、無視されます。


## 4.14 StartTrace

- 機能：軌道修正。(軌道ファイル 直交点)

- 書式：StartTrace(traceName)

- パラメータ数：1

- 対応ポート：30003

- 備考：ROBOT_MODE_RUNNINGはロボットが軌道修正中、ROBOT_MODE_IDLEは軌道修正完了、ROBOT_MODE_ERRORはアラーム、**はロボットの動作状態を取得することが可能です。

- パラメータの詳細説明： 1

  | 参数名 | 类型 | 含义 |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |

- リターンです。

  ErrorID,{},StartTrace(traceName)。 

- 例：まず、点間移動{x,y,z,rx,ry,rz}の後、recv_stringという名前でトレースの最初のジョイントを取得し、ダウンゴーイングネームrecv_stringでトレースフィッティングを行う。

  GetTraceStartPose(recv_string.json)を生成します。

  リターンです。

  0,{x,y,z,rx,ry,rz},GetTraceStartPose(recv_string.json).GetTraceStartPose(recv_string.json).GetTraceStartPose(recv_string.json);

  MovJ(x,y,z,rx,ry,rz)

  リターンです。

  0,{},MovJ(x,y,z,rx,ry,rz)です。

  StartTrace(recv_string)を実行します。

  リターンです。

  0,{},StartTrace(recv_string)です。

- 注） **コントローラバージョン3.5.2以降でサポートされているコマンドです。

## 4.15 StartPath

- 機能：軌跡の再現性。(トラックファイルノード)

- 書式：StartPath(traceName,const,cart)

- パラメータ数：3

- 対応ポート：30003

- 備考：ROBOT_MODE_RUNNINGはロボットが軌跡を描いていることを意味し、ROBOT_MODE_IDLEは軌跡の再現が完了したことを、ROBOT_MODE_ERRORはアラームを意味する**。

- パラメータの詳細説明：3

  | 参数名 | 类型 | 含义 |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |
  | const | int | const=1时，匀速复现，轨迹中的停顿及死区会被移除;<br />const=0时，按照原速复现； |
  | cart | int | cart=1时，按笛卡尔路径复现；<br />cart=0时，按关节路径复现； |

- 儀式を行う。

  ErrorID,{},StartPath(traceName,const,cart)。

- 例：まず名前recv_stringでトレースの最初の点を取得する{j1,j2,j3,j4,j5,j6}、ポイント間の移動後、次の名前recv_stringで元の速度で繰り返し、直交パスと同じ速度で繰り返し動作する。

  GetPathStartPose(recv_string)

  リターンです。

  0,{j1,j2,j3,j4,j5,j6},GetPathStartPose(recv_string).GetPathStartPose(recv_string).GetPathStartPose(recv_string);

  ジョイントモブJ(j1,j2,j3,j4,j5,j6)

  リターンです。

  0,{},JointMovJ(j1,j2,j3,j4,j5,j6);

  StartPath(recv_string,0,1)を実行する。

  リターンです。

  0,{},StartPath(recv_string,0,1)です。

- 注） **コントローラバージョン3.5.2以降でサポートされているコマンドです。

## 4.16 StartFCTrace

- 機能：力制御による軌道修正。(軌道ファイル 直交点)

- 書式：StartFCTrace(traceName)

- パラメータ数：1

- 対応ポート：30003

- 備考：ROBOT_MODE_RUNNINGは軌跡再生動作中、ROBOT_MODE_IDLEは軌跡再生動作完了、ROBOT_MODE_ERRORはアラーム発生を意味します。

- パラメータの詳細説明： 1

  | 参数名       | 类型     | 含义                                       |
  | --------- | ------ | ---------------------------------------- |
  | traceName | string | 轨迹文件名（含后缀）<br /> 轨迹路径存放在/dobot/userdata/project/process/trajectory/ |

- リターンです。

  ErrorID,{},StartFCTrace(traceName)。 

- 例：まずトレースファイル名recv_stringのトレースの最初の点{x,y,z,rx,ry,rz}を取得し、点間移動{x,y,z,rx,ry,rz}後、元の速度で回復して直交経路に従って一定の速度で回復するにはトレースファイル名recv_stringを下に送信します。

  GetTraceStartPose(recv_string)

  リターンです。

  0,{x,y,z,rx,ry,rz},GetTraceStartPose(recv_string).GetTraceStartPose(recv_string).GetTraceStartPose(recv_string);

  MovJ(x,y,z,rx,ry,rz)

  リターンです。

  0,{},MovJ(x,y,z,rx,ry,rz)です。

  StartFCTrace(recv_string)を実行する。

  Sync() // 力制御による軌道修正では終点が不定なので，StartFCTrace の実行終了を待って他のモーションコマンドの実行を継続するために Sync を追加する必要があります．

  リターンです。

  0,{},StartFCTrace(recv_string)です。

- 注） **コントローラバージョン3.5.2以降でサポートされているコマンドです。


## 4.17 Sync

- 機能：キューに入れられた命令の実行をブロックし、キューに入れられた命令がすべて実行されるまで待機し、リターンする。

- 形式：Sync()

- パラメータ数：0

- 対応ポート：30003

- リターンです。

  ErrorID,{},Sync();   

- 例

  シンク()


## 4.18 RelMovJTool

- 機能：工具座標系に沿った相対的な動作指令で、終端動作は関節動作の形で行う。

- フォーマット

  RelMovJTool(offsetX,offsetY,offsetZ,offsetRx,offsetRy,offsetRz,Tool,SpeedJ=R,AccJ=R,User=Index)  

  // SpeedJ=R、AccJ=R、User=Index はオプションパラメータで、それぞれ関節速度比、加速度比の値とユーザ座標系インデックスを示す；ポート 29999 で設定された SpeedJ と AccJ と同じ意味； User：ユーザインデックス 0~9、最後の設定値によって埋められない； Tool は必須パラメータ。 ツールインデックス0〜9。

- 必須パラメータ数：7個

- 対応ポート：30003

- 必要なパラメータ詳細：7

   | 参数名      | 类型     | 含义                   |
  | -------- | ------ | -------------------- |
  | OffsetX  | double | X轴方向偏移，单位：mm         |
  | OffsetY  | double | Y轴方向偏移，单位：mm         |
  | OffsetZ  | double | Z轴方向偏移，单位：mm         |
  | OffsetRx | double | Rx 轴位置，单位：度          |
  | OffsetRy | double | Ry 轴位置，单位：度          |
  | OffsetRz | double | Rz 轴位置，单位：度          |
  | Tool     | int    | 选择已标定的工具坐标系，取值范围：0~9 |


- リターンです。

  ErrorID,{},RelMovJTool(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,Tool,SpeedJ=R,AccJ=R,User=Index).ErrorID,{},RelMovJTool(OffsetRx,OffsetRy,OffsetRz,Tool,OffsetJ=R,User=Index);

- 例

  RelMovJTool(10,10,10,0,0,0,0)

## 4.19 RelMovLTool

- 機能：工具座標系に沿った相対運動指令で、終端運動は直線運動とする。

- フォーマット

  RelMovLTool(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,Tool,SpeedL=R,AccL=R,User=Index)  

  // SpeedL=R、AccL=R、User=Indexはオプションパラメータで、それぞれ直交速度スケール値、加速度スケール値、ユーザー座標系インデックスの設定を示す；ポート29999で設定されたSpeedL、AccLと同じ意味；User：ユーザーインデックス0～9、最後の設定値により埋まらない；Toolは必須。 パラメータ：ツールインデックス0〜9。

- 必須パラメータ数：7個

- 対応ポート：30003

- 必要なパラメータ詳細：7

  | 参数名      | 类型     | 含义                   |
  | -------- | ------ | -------------------- |
  | OffsetX  | double | X轴方向偏移，单位：mm         |
  | OffsetY  | double | Y轴方向偏移，单位：mm         |
  | OffsetZ  | double | Z轴方向偏移，单位：mm         |
  | OffsetRx | double | Rx 轴位置，单位：度          |
  | OffsetRy | double | Ry 轴位置，单位：度          |
  | OffsetRz | double | Rz 轴位置，单位：度          |
  | Tool     | int    | 选择已标定的工具坐标系，取值范围：0~9 |

- リターンです。

  ErrorID,{},RelMovLTool(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,Tool,SpeedL=R, AccL=R,User=Index)。

- 例

  RelMovLTool(10,10,10,0,0,0,0)

## 4.20 RelMovJUser

- 機能：ユーザー座標系に沿った相対的な動作指令で、終了動作は関節動作の形で行う。

- フォーマット

  RelMovJUser(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,User,SpeedJ=R,AccJ=R,Tool=Index)  

  // SpeedJ=R、AccJ=R、Tool=Indexはオプションパラメータで、それぞれ設定用の関節速度比、加速度比の値、ツール座標系インデックスを示す；ポート29999で設定したSpeedJ、AccJと同じ意味；Tool：ツールインデックス0～9、最後の設定値により記入しない；Userは必須パラメータ。 ユーザーインデックス0〜9。

- 必須パラメータ数：7個 

- 対応ポート：30003

- 必要なパラメータ詳細：7

  | 参数名      | 类型     | 含义                   |
  | -------- | ------ | -------------------- |
  | OffsetX  | double | X轴方向偏移，单位：mm         |
  | OffsetY  | double | Y轴方向偏移，单位：mm         |
  | OffsetZ  | double | Z轴方向偏移，单位：mm         |
  | OffsetRx | double | Rx 轴位置，单位：度          |
  | OffsetRy | double | Ry 轴位置，单位：度          |
  | OffsetRz | double | Rz 轴位置，单位：度          |
  | User     | int    | 选择已标定的用户坐标系，取值范围：0~9 |

- リターンです。

  ErrorID,{},RelMovJUser(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,User,SpeedJ=R, AccJ=R,Tool=Index);

- 例

  RelMovJUser(10,10,10,0,0,0,0)

## 4.21 RelMovLUser

- 機能：ユーザーの座標系に沿った相対運動コマンドで、終端運動は直線運動とする。

- フォーマット

  RelMovLUser(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,User,SpeedL=R,AccL=R,Tool=Index)  

  // SpeedL=R、AccL=R、Tool=Indexはオプションパラメータで、それぞれ直交速度スケール、加速度スケール値、ツール座標系インデックスの設定を示す；ポート29999で設定したSpeedL、AccLと同じ意味； Tool：ツールインデックス0～9、最後の設定値により記入しない；Userは必須。 パラメータ：ユーザーインデックス0〜9。

- 必須パラメータ数：7個 

- 対応ポート：30003

- 必要なパラメータ詳細：7

  | 参数名      | 类型     | 含义                   |
  | -------- | ------ | -------------------- |
  | OffsetX  | double | X轴方向偏移，单位：mm         |
  | OffsetY  | double | Y轴方向偏移，单位：mm         |
  | OffsetZ  | double | Z轴方向偏移，单位：mm         |
  | OffsetRx | double | Rx 轴位置，单位：度          |
  | OffsetRy | double | Ry 轴位置，单位：度          |
  | OffsetRz | double | Rz 轴位置，单位：度          |
  | User     | int    | 选择已标定的用户坐标系，取值范围：0~9 |

- リターンです。

  ErrorID,{},RelMovLUser(OffsetX,OffsetY,OffsetZ,OffsetRx,OffsetRy,OffsetRz,User,SpeedL=R, AccL=R,Tool=Index);

- 例

  RelMovLUser(10,10,10,0,0,0,0)

## 4.22 RelJointMovJ

- 機能：各軸の関節座標系に沿った相対的な動作指令で、終了動作は関節動作の形で行う。

- フォーマット

  RelJointMovJ(Offset1,Offset2,Offset3,Offset4,Offset5,Offset6,SpeedJ=R, AccJ=R)です。 

  // SpeedJ=R、AccJ=R はオプションのパラメータで、それぞれ関節速度比、加速度比を示し、ポート 29999 の SpeedJ、AccJ と同じ意味である。

- 必須パラメータ数：6個

- 対応ポート：30003

- 必須パラメータ詳細：6

  | 参数名     | 类型     | 含义           |
  | ------- | ------ | ------------ |
  | Offset1 | double | 关节1的偏移值，单位：度 |
  | Offset2 | double | 关节2的偏移值，单位：度 |
  | Offset3 | double | 关节3的偏移值，单位：度 |
  | Offset4 | double | 关节4的偏移值，单位：度 |
  | Offset5 | double | 关节5的偏移值，单位：度 |
  | Offset6 | double | 关节6的偏移值，单位：度 |

- リターンです。

  ErrorID,{},RelJointMovJ(Offset1,Offset2,Offset3,Offset4,Offset5,Offset6,SpeedJ=R, AccJ=R)。

- 例

  RelJointMovJ(10,10,10,0,0,0)




# 6.エラーコードの説明

| 错误码 | 描述                     | 备注                                                         |
| ------ | ------------------------ | ------------------------------------------------------------ |
| 0      | 无错误                   | 下发成功                                                     |
| -1     | 没有获取成功             | 命令接收失败/建立失败                                        |
| 。。。 | 。。。                   | 。。。                                                       |
| -10000 | 命令错误                 | 不存在下发的命令                                             |
| -20000 | 参数数量错误             | 下发命令中的参数数量错误                                     |
| -30001 | 第一个参数的参数类型错误 | -30000表示参数类型错误<br /> 最后一位1表示下发第1个参数的参数类型错误 |
| -30002 | 第二个参数的参数类型错误 | -30000表示参数类型错误<br /> 最后一位2表示下发第2个参数的参数类型错误 |
| 。。。 | 。。。                   | 。。。                                                       |
| -40001 | 第一个参数的参数范围错误 | -40000表示参数范围错误<br /> 最后一位1表示下发第1个参数的参数范围错误 |
| -40002 | 第二个参数的参数范围错误 | -40000表示参数范围错误<br /> 最后一位1表示下发第1个参数的参数范围错误 |
| 。。。 | 。。。                   | 。。。                                                       |
|        |                          |                                                              |

